(function(){"use strict";var e={7713:function(e,t,a){a(4114);var n=a(3751),o=a(1250),r=a(414),i=a.n(r),l=a(6278),s=(0,l.y$)({state:{pages:[],currentPage:null},mutations:{setPages(e,t){e.pages=t},setCurrentPage(e,t){e.currentPage=t}},actions:{async fetchPages({commit:e,dispatch:t}){try{const a=await fetch("/api/records"),n=await a.json();e("setPages",n),n.length>0&&t("fetchPageDetails",n[0].id)}catch(a){console.error("Error fetching pages:",a)}},async fetchPageDetails({commit:e},t){try{const a=await fetch(`/api/records/${t}`),n=await a.json();e("setCurrentPage",n)}catch(a){console.error("Error fetching page details:",a)}},async updatePageDetails({commit:e},t){try{const a=await fetch(`/api/records/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await a.json();e("setCurrentPage",n)}catch(a){console.error("Error updating page details:",a)}}}}),c=a(641);function u(e,t,a,n,o,r){const i=(0,c.g2)("router-view");return(0,c.uX)(),(0,c.Wv)(i)}var d={name:"App",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},methods:{checkAuthentication(){this.isAuthenticated=!!localStorage.getItem("userAuthenticated"),this.isAuthenticated||this.$router.push("/login")}}},p=a(6262);const v=(0,p.A)(d,[["render",u]]);var g=v,h=a(5220);const m={class:"login-container"};function f(e,t,a,n,o,r){return(0,c.uX)(),(0,c.CE)("div",m,[(0,c.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.login&&r.login(...e))},"Log in with Azure AD")])}var k={methods:{login(){window.location.href="/auth/signin"}}};const b=(0,p.A)(k,[["render",f],["__scopeId","data-v-9377a308"]]);var L=b;const y={id:"home-container"},C={class:"main-container"},w={class:"sidebar"},P={class:"content"};function E(e,t,a,n,o,r){const i=(0,c.g2)("NavBarComponent"),l=(0,c.g2)("SideBarComponent"),s=(0,c.g2)("shiftComp");return(0,c.uX)(),(0,c.CE)("div",y,[(0,c.bF)(i),(0,c.Lk)("div",C,[(0,c.Lk)("aside",w,[(0,c.bF)(l)]),(0,c.Lk)("div",P,[(0,c.bF)(s)])])])}var A=a(33);const S=e=>((0,c.Qi)("data-v-4e4abc7c"),e=e(),(0,c.jt)(),e),X={class:"navbar navbar-expand-lg bg-light"},_={class:"container-fluid"},M=S((()=>(0,c.Lk)("a",{class:"navbar-brand",href:"/"},"Handover pages",-1))),I=S((()=>(0,c.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,c.Lk)("span",{class:"navbar-toggler-icon"})],-1))),x={class:"collapse navbar-collapse",id:"navbarSupportedContent"},O=(0,c.Fv)('<ul class="navbar-nav me-auto mb-2 mb-lg-0" data-v-4e4abc7c><li class="nav-item" data-v-4e4abc7c><a class="nav-link active" aria-current="page" href="#" data-v-4e4abc7c>Templates</a></li><li class="nav-item" data-v-4e4abc7c><a class="nav-link" href="#" data-v-4e4abc7c>Shifts</a></li></ul>',1),j=S((()=>(0,c.Lk)("form",{class:"d-flex",role:"search"},[(0,c.Lk)("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1))),D={class:"navbar-nav"},U={class:"nav-item dropdown"},N={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},F=S((()=>(0,c.Lk)("ul",{class:"dropdown-menu dropdown-menu-end","aria-labelledby":"navbarDropdownMenuLink"},[(0,c.Lk)("li",null,[(0,c.Lk)("a",{class:"dropdown-item",href:"/auth/signout"},"Sign out")])],-1)));function T(e,t,a,n,o,r){return(0,c.uX)(),(0,c.CE)("nav",X,[(0,c.Lk)("div",_,[M,I,(0,c.Lk)("div",x,[O,j,(0,c.Lk)("ul",D,[(0,c.Lk)("li",U,[(0,c.Lk)("a",N,(0,A.v_)(o.userProfile.displayName),1),F])])])])])}var V={name:"NavBarComponent",data(){return{userProfile:{displayName:localStorage.getItem("user")}}}};const B=(0,p.A)(V,[["render",T],["__scopeId","data-v-4e4abc7c"]]);var Q=B;const H={class:"sidebar-comp"},$={class:"d-flex flex-column flex-shrink-0 p-3 bg-light",style:{width:"280px"}},J={class:"pb-3 mb-3 border-bottom"},K={class:"nav-pills-wrapper"},R={class:"nav nav-pills flex-column mb-auto"},q={class:"nav-item"},W={class:"nav flex-column"},z=["onClick"];function G(e,t,a,o,r,i){return(0,c.uX)(),(0,c.CE)("div",H,[(0,c.Lk)("div",$,[(0,c.Lk)("div",J,[(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",class:"form-control",placeholder:"Enter page title"},null,512),[[n.Jo,r.searchQuery]])]),(0,c.Lk)("div",K,[(0,c.Lk)("ul",R,[(0,c.Lk)("li",q,[(0,c.Lk)("ul",W,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.filteredPages,(t=>((0,c.uX)(),(0,c.CE)("li",{class:"nav-item",key:t.id},[(0,c.Lk)("a",{href:"#",class:(0,A.C4)(["nav-link link-dark",{active:t.id===e.currentPage?.id}]),onClick:e=>i.loadPage(t.id)},(0,A.v_)(t.title),11,z)])))),128))])])])])])])}var Y={name:"SidebarComponent",data(){return{searchQuery:""}},computed:{...(0,l.aH)(["pages","currentPage"]),filteredPages(){return this.pages.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,l.i0)(["fetchPages","fetchPageDetails"]),loadPage(e){this.fetchPageDetails(e)}},created(){this.fetchPages()}};const Z=(0,p.A)(Y,[["render",G],["__scopeId","data-v-c07a408e"]]);var ee=Z;const te=e=>((0,c.Qi)("data-v-3867c25d"),e=e(),(0,c.jt)(),e),ae={id:"content-container",class:"container mt-4"},ne={key:0,class:"main-container"},oe={class:"header"},re={class:"dropdown"},ie=te((()=>(0,c.Lk)("button",{class:"btn btn-link text-decoration-none",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,c.Lk)("i",{class:"bi bi-three-dots-vertical"})],-1))),le={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton"},se=te((()=>(0,c.Lk)("li",null,[(0,c.Lk)("hr",{class:"dropdown-divider"})],-1))),ce=te((()=>(0,c.Lk)("li",null,[(0,c.Lk)("a",{class:"dropdown-item",id:"remove-btn",href:"#"},"Remove page")],-1))),ue=te((()=>(0,c.Lk)("h6",null,"Engineers on Shift",-1))),de={key:0},pe={class:"table table-bordered"},ve=te((()=>(0,c.Lk)("thead",null,[(0,c.Lk)("tr",null,[(0,c.Lk)("th",null,"Incident Number"),(0,c.Lk)("th",null,"Status"),(0,c.Lk)("th",null,"Priority"),(0,c.Lk)("th",null,"Main Problem"),(0,c.Lk)("th",null,"Notes")])],-1))),ge={key:0},he={key:1},me=["onUpdate:modelValue"],fe=te((()=>(0,c.Lk)("option",{value:"Active"},"Active",-1))),ke=te((()=>(0,c.Lk)("option",{value:"Awaiting user info"},"Awaiting User Info",-1))),be=te((()=>(0,c.Lk)("option",{value:"Awaiting third party"},"Awaiting Third Party",-1))),Le=te((()=>(0,c.Lk)("option",{value:"Resolved"},"Resolved",-1))),ye=[fe,ke,be,Le],Ce={key:0},we={key:1},Pe=["onUpdate:modelValue"],Ee=te((()=>(0,c.Lk)("option",{value:"High"},"High",-1))),Ae=te((()=>(0,c.Lk)("option",{value:"Medium"},"Medium",-1))),Se=te((()=>(0,c.Lk)("option",{value:"Low"},"Low",-1))),Xe=[Ee,Ae,Se],_e={key:0},Me={key:1},Ie=["onUpdate:modelValue"],xe={key:0},Oe={key:1},je=["onUpdate:modelValue"],De={key:1};function Ue(e,t,a,o,r,i){const l=(0,c.g2)("h7");return(0,c.uX)(),(0,c.CE)("div",ae,[e.currentPage?((0,c.uX)(),(0,c.CE)("div",ne,[(0,c.Lk)("div",oe,[(0,c.Lk)("h1",null,(0,A.v_)(e.currentPage.title),1),(0,c.Lk)("div",re,[ie,(0,c.Lk)("ul",le,[(0,c.Lk)("li",null,[(0,c.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=(...e)=>i.toggleEditMode&&i.toggleEditMode(...e))},(0,A.v_)(r.editMode?"Save":"Edit"),1)]),se,ce])])]),(0,c.Lk)("div",null,[ue,(0,c.Lk)("ul",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.currentPage.engineersOnShift,(e=>((0,c.uX)(),(0,c.CE)("li",{key:e.id},(0,A.v_)(e.name),1)))),128))])]),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.currentPage.clients,((e,t)=>((0,c.uX)(),(0,c.CE)("div",{key:t},[(0,c.Lk)("h6",null,(0,A.v_)(t),1),e.incidents.length>0?((0,c.uX)(),(0,c.CE)("div",de,[(0,c.bF)(l,null,{default:(0,c.k6)((()=>[(0,c.eW)("Incidents")])),_:1}),(0,c.Lk)("table",pe,[ve,(0,c.Lk)("tbody",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.incidents,(e=>((0,c.uX)(),(0,c.CE)("tr",{key:e.incNumber},[(0,c.Lk)("td",null,(0,A.v_)(e.incNumber),1),(0,c.Lk)("td",null,[r.editMode?((0,c.uX)(),(0,c.CE)("div",he,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":t=>e.status=t},ye,8,me),[[n.u1,e.status]])])):((0,c.uX)(),(0,c.CE)("div",ge,(0,A.v_)(e.status),1))]),(0,c.Lk)("td",null,[r.editMode?((0,c.uX)(),(0,c.CE)("div",we,[(0,c.bo)((0,c.Lk)("select",{"onUpdate:modelValue":t=>e.priority=t},Xe,8,Pe),[[n.u1,e.priority]])])):((0,c.uX)(),(0,c.CE)("div",Ce,(0,A.v_)(e.priority),1))]),(0,c.Lk)("td",null,[r.editMode?((0,c.uX)(),(0,c.CE)("div",Me,[(0,c.bo)((0,c.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.mainProblem=t},null,8,Ie),[[n.Jo,e.mainProblem]])])):((0,c.uX)(),(0,c.CE)("div",_e,(0,A.v_)(e.mainProblem),1))]),(0,c.Lk)("td",null,[r.editMode?((0,c.uX)(),(0,c.CE)("div",Oe,[(0,c.bo)((0,c.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.notes=t},null,8,je),[[n.Jo,e.notes]])])):((0,c.uX)(),(0,c.CE)("div",xe,(0,A.v_)(e.notes),1))])])))),128))])])])):(0,c.Q3)("",!0)])))),128))])):((0,c.uX)(),(0,c.CE)("div",De,"No data available"))])}var Ne={data(){return{editMode:!1}},computed:{...(0,l.aH)(["currentPage"])},methods:{...(0,l.i0)(["fetchPageDetails","updatePageDetails"]),toggleEditMode(){this.editMode&&this.updatePageDetails(this.currentPage),this.editMode=!this.editMode}},created(){const e=this.$route.params.id;this.fetchPageDetails(e)}};const Fe=(0,p.A)(Ne,[["render",Ue],["__scopeId","data-v-3867c25d"]]);var Te=Fe,Ve={components:{NavBarComponent:Q,SideBarComponent:ee,shiftComp:Te}};const Be=(0,p.A)(Ve,[["render",E]]);var Qe=Be;const He=(0,h.aE)({history:(0,h.LA)("/"),routes:[{path:"/login",name:"Login",component:L},{path:"/",name:"Home",component:Qe,meta:{requiresAuth:!0}}]});He.beforeEach(((e,t,a)=>{const n="true"===localStorage.getItem("userAuthenticated");e.matched.some((e=>e.meta.requiresAuth))&&!n?a("/login"):"/login"===e.path&&n?a("/"):a()}));var $e=He;const Je=(0,n.Ef)(g);Je.use($e),Je.use(i()),Je.use(s),o.A.get("/auth/status").then((e=>{console.log("Authentication status:",e.data.authenticated),console.log("User:",e.data.user.name),e.data.authenticated?(localStorage.setItem("userAuthenticated","true"),localStorage.setItem("user",e.data.user.name),Je.mount("#app")):(localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),console.log(localStorage.getItem("user")),$e.push("/login"),Je.mount("#app"))})).catch((e=>{console.error("Error checking authentication status:",e),localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),$e.push("/login"),Je.mount("#app")}))}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],l=n[1],s=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(s)var u=s(a)}for(t&&t(n);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(7713)}));n=a.O(n)})();
//# sourceMappingURL=app.ddd5d4b9.js.map