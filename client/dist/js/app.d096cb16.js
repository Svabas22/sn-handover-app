(function(){"use strict";var e={2944:function(e,t,a){a(4114);var n=a(3751),o=a(1250),r=a(414),i=a.n(r),l=a(6278),s=(0,l.y$)({state:{pages:[],currentPage:null},mutations:{setPages(e,t){e.pages=t},setCurrentPage(e,t){e.currentPage=t}},actions:{async fetchPages({commit:e,dispatch:t}){try{const a=await fetch("/api/records");if(!a.ok)throw new Error("Network response was not ok");const n=await a.json();e("setPages",n),n.length>0&&t("fetchPageDetails",n[0].id)}catch(a){console.error("Error fetching pages:",a)}},async fetchPageDetails({commit:e},t){try{const a=await fetch(`/api/records/${t}`);if(!a.ok)throw new Error("Network response was not ok");const n=await a.json();e("setCurrentPage",n)}catch(a){console.error("Error fetching page details:",a)}},async updatePageDetails({commit:e},t){try{const a=await fetch(`/api/records/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Network response was not ok");const n=await a.json();e("setCurrentPage",n)}catch(a){console.error("Error updating page details:",a)}}}}),d=a(641);function c(e,t,a,n,o,r){const i=(0,d.g2)("router-view");return(0,d.uX)(),(0,d.Wv)(i)}var u={name:"App",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},methods:{checkAuthentication(){this.isAuthenticated=!!localStorage.getItem("userAuthenticated"),this.isAuthenticated||this.$router.push("/login")}}},p=a(6262);const v=(0,p.A)(u,[["render",c]]);var g=v,m=a(5220);const h={class:"login-container"};function b(e,t,a,n,o,r){return(0,d.uX)(),(0,d.CE)("div",h,[(0,d.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.login&&r.login(...e))},"Log in with Azure AD")])}var k={methods:{login(){window.location.href="/auth/signin"}}};const f=(0,p.A)(k,[["render",b],["__scopeId","data-v-9377a308"]]);var L=f;const y={id:"home-container"},w={class:"main-container"},C={class:"sidebar"},P={class:"content"};function E(e,t,a,n,o,r){const i=(0,d.g2)("NavBarComponent"),l=(0,d.g2)("SideBarComponent"),s=(0,d.g2)("shiftComp");return(0,d.uX)(),(0,d.CE)("div",y,[(0,d.bF)(i),(0,d.Lk)("div",w,[(0,d.Lk)("aside",C,[(0,d.bF)(l)]),(0,d.Lk)("div",P,[(0,d.bF)(s)])])])}var A=a(33);const S=e=>((0,d.Qi)("data-v-4e4abc7c"),e=e(),(0,d.jt)(),e),M={class:"navbar navbar-expand-lg bg-light"},x={class:"container-fluid"},X=S((()=>(0,d.Lk)("a",{class:"navbar-brand",href:"/"},"Handover pages",-1))),_=S((()=>(0,d.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,d.Lk)("span",{class:"navbar-toggler-icon"})],-1))),I={class:"collapse navbar-collapse",id:"navbarSupportedContent"},O=(0,d.Fv)('<ul class="navbar-nav me-auto mb-2 mb-lg-0" data-v-4e4abc7c><li class="nav-item" data-v-4e4abc7c><a class="nav-link active" aria-current="page" href="#" data-v-4e4abc7c>Templates</a></li><li class="nav-item" data-v-4e4abc7c><a class="nav-link" href="#" data-v-4e4abc7c>Shifts</a></li></ul>',1),j=S((()=>(0,d.Lk)("form",{class:"d-flex",role:"search"},[(0,d.Lk)("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1))),N={class:"navbar-nav"},D={class:"nav-item dropdown"},T={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},U=S((()=>(0,d.Lk)("ul",{class:"dropdown-menu dropdown-menu-end","aria-labelledby":"navbarDropdownMenuLink"},[(0,d.Lk)("li",null,[(0,d.Lk)("a",{class:"dropdown-item",href:"/auth/signout"},"Sign out")])],-1)));function F(e,t,a,n,o,r){return(0,d.uX)(),(0,d.CE)("nav",M,[(0,d.Lk)("div",x,[X,_,(0,d.Lk)("div",I,[O,j,(0,d.Lk)("ul",N,[(0,d.Lk)("li",D,[(0,d.Lk)("a",T,(0,A.v_)(o.userProfile.displayName),1),U])])])])])}var B={name:"NavBarComponent",data(){return{userProfile:{displayName:localStorage.getItem("user")}}}};const V=(0,p.A)(B,[["render",F],["__scopeId","data-v-4e4abc7c"]]);var H=V;const Q={class:"sidebar-comp"},$={class:"d-flex flex-column flex-shrink-0 p-3 bg-light",style:{width:"280px"}},R={class:"pb-3 mb-3 border-bottom"},q={class:"nav-pills-wrapper"},J={class:"nav nav-pills flex-column mb-auto"},K={class:"nav-item"},W={class:"nav flex-column"},z=["onClick"];function G(e,t,a,o,r,i){return(0,d.uX)(),(0,d.CE)("div",Q,[(0,d.Lk)("div",$,[(0,d.Lk)("div",R,[(0,d.bo)((0,d.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",class:"form-control",placeholder:"Enter page title"},null,512),[[n.Jo,r.searchQuery]])]),(0,d.Lk)("div",q,[(0,d.Lk)("ul",J,[(0,d.Lk)("li",K,[(0,d.Lk)("ul",W,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(i.filteredPages,(t=>((0,d.uX)(),(0,d.CE)("li",{class:"nav-item",key:t.id},[(0,d.Lk)("a",{href:"#",class:(0,A.C4)(["nav-link link-dark",{active:t.id===e.currentPage?.id}]),onClick:e=>i.loadPage(t.id)},(0,A.v_)(t.title),11,z)])))),128))])])])])])])}var Y={name:"SidebarComponent",data(){return{searchQuery:""}},computed:{...(0,l.aH)(["pages","currentPage"]),filteredPages(){return this.pages.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,l.i0)(["fetchPages","fetchPageDetails"]),loadPage(e){this.fetchPageDetails(e)}},created(){this.fetchPages()}};const Z=(0,p.A)(Y,[["render",G],["__scopeId","data-v-c07a408e"]]);var ee=Z;const te=e=>((0,d.Qi)("data-v-6752c7c2"),e=e(),(0,d.jt)(),e),ae={id:"content-container",class:"container mt-4"},ne={key:0,class:"main-container"},oe={class:"header"},re={class:"dropwdowns-opt"},ie=(0,d.Fv)('<div class="dropdown-add" data-v-6752c7c2><button class="btn btn-link text-decoration-none" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false" data-v-6752c7c2><i class="bi bi-plus-lg" data-v-6752c7c2></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton" data-v-6752c7c2><li data-v-6752c7c2><a class="dropdown-item" id="add-inc-btn" href="#" data-v-6752c7c2>Add Incident</a></li><li data-v-6752c7c2><a class="dropdown-item" id="add-prb-btn" href="#" data-v-6752c7c2>Add Problem</a></li><li data-v-6752c7c2><a class="dropdown-item" id="add-chg-btn" href="#" data-v-6752c7c2>Add Change</a></li><li data-v-6752c7c2><a class="dropdown-item" id="add-req-btn" href="#" data-v-6752c7c2>Add Service Request</a></li></ul></div>',1),le={class:"dropdown"},se=te((()=>(0,d.Lk)("button",{class:"btn btn-link text-decoration-none",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,d.Lk)("i",{class:"bi bi-three-dots-vertical"})],-1))),de={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton"},ce=te((()=>(0,d.Lk)("li",null,[(0,d.Lk)("hr",{class:"dropdown-divider"})],-1))),ue=te((()=>(0,d.Lk)("li",null,[(0,d.Lk)("a",{class:"dropdown-item",id:"remove-btn",href:"#","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"Remove page")],-1))),pe={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ve={class:"modal-dialog modal-dialog-centered"},ge={class:"modal-content"},me=te((()=>(0,d.Lk)("div",{class:"modal-header"},[(0,d.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"Modal title"),(0,d.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),he=te((()=>(0,d.Lk)("div",{class:"modal-body"}," ... ",-1))),be={class:"modal-footer"},ke=te((()=>(0,d.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1))),fe=te((()=>(0,d.Lk)("div",{class:"toast-container position-fixed bottom-0 end-0 p-3"},[(0,d.Lk)("div",{id:"liveToast",class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,d.Lk)("div",{class:"toast-header"},[(0,d.Lk)("strong",{class:"me-auto"},"Bootstrap"),(0,d.Lk)("small",null,"11 mins ago"),(0,d.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})]),(0,d.Lk)("div",{class:"toast-body"}," Hello, world! This is a toast message. ")])],-1))),Le=te((()=>(0,d.Lk)("h6",null,"Engineers on Shift",-1))),ye={key:0},we={class:"table table-bordered"},Ce=te((()=>(0,d.Lk)("thead",null,[(0,d.Lk)("tr",null,[(0,d.Lk)("th",null,"Incident Number"),(0,d.Lk)("th",null,"Status"),(0,d.Lk)("th",null,"Priority"),(0,d.Lk)("th",null,"Main Problem"),(0,d.Lk)("th",null,"Notes")])],-1))),Pe={key:0},Ee={key:1},Ae=["onUpdate:modelValue"],Se=te((()=>(0,d.Lk)("option",{value:"Active"},"Active",-1))),Me=te((()=>(0,d.Lk)("option",{value:"Awaiting user info"},"Awaiting User Info",-1))),xe=te((()=>(0,d.Lk)("option",{value:"Awaiting third party"},"Awaiting Third Party",-1))),Xe=te((()=>(0,d.Lk)("option",{value:"Resolved"},"Resolved",-1))),_e=[Se,Me,xe,Xe],Ie={key:0},Oe={key:1},je=["onUpdate:modelValue"],Ne=te((()=>(0,d.Lk)("option",{value:"High"},"High",-1))),De=te((()=>(0,d.Lk)("option",{value:"Medium"},"Medium",-1))),Te=te((()=>(0,d.Lk)("option",{value:"Low"},"Low",-1))),Ue=[Ne,De,Te],Fe={key:0},Be={key:1},Ve=["onUpdate:modelValue"],He={key:0},Qe={key:1},$e=["onUpdate:modelValue"],Re={key:1};function qe(e,t,a,o,r,i){const l=(0,d.g2)("h7");return(0,d.uX)(),(0,d.CE)("div",ae,[e.currentPage?((0,d.uX)(),(0,d.CE)("div",ne,[(0,d.Lk)("div",oe,[(0,d.Lk)("h1",null,(0,A.v_)(e.currentPage.title),1),(0,d.Lk)("div",re,[ie,(0,d.Lk)("div",le,[se,(0,d.Lk)("ul",de,[(0,d.Lk)("li",null,[(0,d.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=(...e)=>i.toggleEditMode&&i.toggleEditMode(...e))},(0,A.v_)(r.editMode?"Save":"Edit"),1)]),ce,ue])])])]),(0,d.Lk)("div",pe,[(0,d.Lk)("div",ve,[(0,d.Lk)("div",ge,[me,he,(0,d.Lk)("div",be,[ke,(0,d.Lk)("button",{type:"button",class:"btn btn-primary",id:"remove-btn-mod",onClick:t[1]||(t[1]=(...e)=>i.deletePage&&i.deletePage(...e))},"Remove")])])])]),fe,(0,d.Lk)("div",null,[Le,(0,d.Lk)("ul",null,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.currentPage.engineersOnShift,(e=>((0,d.uX)(),(0,d.CE)("li",{key:e.id},(0,A.v_)(e.name),1)))),128))])]),((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.currentPage.clients,((e,t)=>((0,d.uX)(),(0,d.CE)("div",{key:t},[(0,d.Lk)("h6",null,(0,A.v_)(t),1),e.incidents.length>0?((0,d.uX)(),(0,d.CE)("div",ye,[(0,d.bF)(l,null,{default:(0,d.k6)((()=>[(0,d.eW)("Incidents")])),_:1}),(0,d.Lk)("table",we,[Ce,(0,d.Lk)("tbody",null,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.incidents,(e=>((0,d.uX)(),(0,d.CE)("tr",{key:e.incNumber},[(0,d.Lk)("td",null,(0,A.v_)(e.incNumber),1),(0,d.Lk)("td",null,[r.editMode?((0,d.uX)(),(0,d.CE)("div",Ee,[(0,d.bo)((0,d.Lk)("select",{"onUpdate:modelValue":t=>e.status=t},_e,8,Ae),[[n.u1,e.status]])])):((0,d.uX)(),(0,d.CE)("div",Pe,(0,A.v_)(e.status),1))]),(0,d.Lk)("td",null,[r.editMode?((0,d.uX)(),(0,d.CE)("div",Oe,[(0,d.bo)((0,d.Lk)("select",{"onUpdate:modelValue":t=>e.priority=t},Ue,8,je),[[n.u1,e.priority]])])):((0,d.uX)(),(0,d.CE)("div",Ie,(0,A.v_)(e.priority),1))]),(0,d.Lk)("td",null,[r.editMode?((0,d.uX)(),(0,d.CE)("div",Be,[(0,d.bo)((0,d.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.mainProblem=t},null,8,Ve),[[n.Jo,e.mainProblem]])])):((0,d.uX)(),(0,d.CE)("div",Fe,(0,A.v_)(e.mainProblem),1))]),(0,d.Lk)("td",null,[r.editMode?((0,d.uX)(),(0,d.CE)("div",Qe,[(0,d.bo)((0,d.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.notes=t},null,8,$e),[[n.Jo,e.notes]])])):((0,d.uX)(),(0,d.CE)("div",He,(0,A.v_)(e.notes),1))])])))),128))])])])):(0,d.Q3)("",!0)])))),128))])):((0,d.uX)(),(0,d.CE)("div",Re,"No data available"))])}var Je={data(){return{editMode:!1}},computed:{...(0,l.aH)(["currentPage"])},methods:{...(0,l.i0)(["fetchPageDetails","updatePageDetails"]),toggleEditMode(){this.editMode&&this.updatePageDetails(this.currentPage),this.editMode=!this.editMode},deletePage(){confirm("Are you sure you want to delete this page? This action cannot be undone.")&&o.A.delete(`/api/records/${this.currentPage.id}`).then((()=>{alert("Page successfully deleted"),this.$router.push({name:"HomePage"})})).catch((e=>{console.error("Error deleting page:",e),alert("Error deleting page")}))}},created(){const e=this.$route.params.id;this.fetchPageDetails(e)}};const Ke=(0,p.A)(Je,[["render",qe],["__scopeId","data-v-6752c7c2"]]);var We=Ke,ze={components:{NavBarComponent:H,SideBarComponent:ee,shiftComp:We}};const Ge=(0,p.A)(ze,[["render",E]]);var Ye=Ge;const Ze=(0,m.aE)({history:(0,m.LA)("/"),routes:[{path:"/login",name:"Login",component:L},{path:"/",name:"Home",component:Ye,meta:{requiresAuth:!0}}]});Ze.beforeEach(((e,t,a)=>{const n="true"===localStorage.getItem("userAuthenticated");e.matched.some((e=>e.meta.requiresAuth))&&!n?a("/login"):"/login"===e.path&&n?a("/"):a()}));var et=Ze;const tt=(0,n.Ef)(g);tt.use(et),tt.use(i()),tt.use(s),o.A.get("/auth/status").then((e=>{console.log("Authentication status:",e.data.authenticated),console.log("User:",e.data.user.name),e.data.authenticated?(localStorage.setItem("userAuthenticated","true"),localStorage.setItem("user",e.data.user.name),tt.mount("#app")):(localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),console.log(localStorage.getItem("user")),et.push("/login"),tt.mount("#app"))})).catch((e=>{console.error("Error checking authentication status:",e),localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),et.push("/login"),tt.mount("#app")}))}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],l=n[1],s=n[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(s)var c=s(a)}for(t&&t(n);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(2944)}));n=a.O(n)})();
//# sourceMappingURL=app.d096cb16.js.map