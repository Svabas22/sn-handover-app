(function(){"use strict";var e={8960:function(e,t,a){a(4114);var n=a(3751),o=a(1250),r=a(414),l=a.n(r),s=a(454),i=a(6278),c=(0,i.y$)({state:{pages:[],currentPage:null},mutations:{setPages(e,t){e.pages=t},setCurrentPage(e,t){e.currentPage=t}},actions:{async fetchPages({commit:e,dispatch:t}){try{const a=await fetch("/api/records"),n=await a.json();e("setPages",n),n.length>0&&t("fetchPageDetails",n[0].id)}catch(a){console.error("Error fetching pages:",a)}},async fetchPageDetails({commit:e},t){const a=await fetch(`/api/records/${t}`),n=await a.json();e("setCurrentPage",n)}}}),d=a(641);function u(e,t,a,n,o,r){const l=(0,d.g2)("router-view");return(0,d.uX)(),(0,d.Wv)(l)}var v={name:"App",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},methods:{checkAuthentication(){this.isAuthenticated=!!localStorage.getItem("userAuthenticated"),this.isAuthenticated||this.$router.push("/login")}}},p=a(6262);const h=(0,p.A)(v,[["render",u]]);var g=h,m=a(5220);const f={class:"login-container"};function b(e,t,a,n,o,r){return(0,d.uX)(),(0,d.CE)("div",f,[(0,d.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.login&&r.login(...e))},"Log in with Azure AD")])}var k={methods:{login(){window.location.href="/auth/signin"}}};const L=(0,p.A)(k,[["render",b],["__scopeId","data-v-9377a308"]]);var y=L;const w={id:"home-container"},C={class:"main-container"},P={class:"sidebar"},E={class:"content"};function S(e,t,a,n,o,r){const l=(0,d.g2)("NavBarComponent"),s=(0,d.g2)("SideBarComponent"),i=(0,d.g2)("shiftComp");return(0,d.uX)(),(0,d.CE)("div",w,[(0,d.bF)(l),(0,d.Lk)("div",C,[(0,d.Lk)("aside",P,[(0,d.bF)(s)]),(0,d.Lk)("div",E,[(0,d.bF)(i)])])])}var A=a(33);const I=e=>((0,d.Qi)("data-v-42799688"),e=e(),(0,d.jt)(),e),_={class:"navbar navbar-expand-lg bg-light"},x={class:"container-fluid"},X=I((()=>(0,d.Lk)("a",{class:"navbar-brand",href:"/"},"Handover pages",-1))),M=I((()=>(0,d.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,d.Lk)("span",{class:"navbar-toggler-icon"})],-1))),O={class:"collapse navbar-collapse",id:"navbarSupportedContent"},F=(0,d.Fv)('<ul class="navbar-nav me-auto mb-2 mb-lg-0" data-v-42799688><li class="nav-item" data-v-42799688><a class="nav-link active" aria-current="page" href="#" data-v-42799688>Templates</a></li><li class="nav-item" data-v-42799688><a class="nav-link" href="#" data-v-42799688>Shifts</a></li></ul>',1),j=I((()=>(0,d.Lk)("form",{class:"d-flex",role:"search"},[(0,d.Lk)("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1))),D={class:"navbar-nav"},B={class:"nav-item dropdown"},N={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Q=I((()=>(0,d.Lk)("ul",{class:"dropdown-menu dropdown-menu-end","aria-labelledby":"navbarDropdownMenuLink"},[(0,d.Lk)("li",null,[(0,d.Lk)("a",{class:"dropdown-item",href:"/auth/signout"},"Sign out")])],-1)));function T(e,t,a,n,o,r){return(0,d.uX)(),(0,d.CE)("nav",_,[(0,d.Lk)("div",x,[X,M,(0,d.Lk)("div",O,[F,j,(0,d.Lk)("ul",D,[(0,d.Lk)("li",B,[(0,d.Lk)("a",N,(0,A.v_)(o.userProfile.displayName),1),Q])])])])])}var H={name:"NavBarComponent",data(){return{userProfile:{displayName:localStorage.getItem("user")}}}};const K=(0,p.A)(H,[["render",T],["__scopeId","data-v-42799688"]]);var $=K;const q={class:"sidebar-comp"},U={class:"d-flex flex-column flex-shrink-0 p-3 bg-light",style:{width:"280px"}},W={class:"pb-3 mb-3 border-bottom"},z={class:"nav-pills-wrapper"},J={class:"nav nav-pills flex-column mb-auto"},R={class:"nav-item"},V={class:"nav flex-column"},Y=["onClick"];function G(e,t,a,o,r,l){return(0,d.uX)(),(0,d.CE)("div",q,[(0,d.Lk)("div",U,[(0,d.Lk)("div",W,[(0,d.bo)((0,d.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",class:"form-control",placeholder:"Enter page title"},null,512),[[n.Jo,r.searchQuery]])]),(0,d.Lk)("div",z,[(0,d.Lk)("ul",J,[(0,d.Lk)("li",R,[(0,d.Lk)("ul",V,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(l.filteredPages,(t=>((0,d.uX)(),(0,d.CE)("li",{class:"nav-item",key:t.id},[(0,d.Lk)("a",{href:"#",class:(0,A.C4)(["nav-link link-dark",{active:t.id===e.currentPage?.id}]),onClick:e=>l.loadPage(t.id)},(0,A.v_)(t.title),11,Y)])))),128))])])])])])])}var Z={name:"SidebarComponent",data(){return{searchQuery:""}},computed:{...(0,i.aH)(["pages","currentPage"]),filteredPages(){return this.pages.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,i.i0)(["fetchPages","fetchPageDetails"]),loadPage(e){this.fetchPageDetails(e)}},created(){this.fetchPages()}};const ee=(0,p.A)(Z,[["render",G],["__scopeId","data-v-06d012d6"]]);var te=ee;const ae=e=>((0,d.Qi)("data-v-a08fea22"),e=e(),(0,d.jt)(),e),ne={id:"content-container",class:"container mt-4"},oe={key:0,class:"main-container"},re={class:"header"},le=ae((()=>(0,d.Lk)("h1",null,"Handover 2024-05-24 Night",-1))),se={class:"dropdown"},ie=ae((()=>(0,d.Lk)("button",{class:"btn btn-link text-decoration-none",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,d.Lk)("i",{class:"bi bi-three-dots-vertical"})],-1))),ce={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton"},de=ae((()=>(0,d.Lk)("li",null,[(0,d.Lk)("a",{class:"dropdown-item",href:"#"},"Edit")],-1))),ue={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},ve={class:"modal-dialog"},pe={class:"modal-content"},he=ae((()=>(0,d.Lk)("div",{class:"modal-header"},[(0,d.Lk)("h5",{class:"modal-title",id:"deleteModalLabel"},"Confirm Deletion"),(0,d.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ge=ae((()=>(0,d.Lk)("div",{class:"modal-body"}," Are you sure you want to delete this page? ",-1))),me={class:"modal-footer"},fe=ae((()=>(0,d.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1))),be=ae((()=>(0,d.Lk)("h6",null,"Engineers on Shift",-1))),ke={key:1};function Le(e,t,a,n,o,r){const l=(0,d.g2)("h7");return(0,d.uX)(),(0,d.CE)("div",ne,[e.currentPage?((0,d.uX)(),(0,d.CE)("div",oe,[(0,d.Lk)("div",re,[le,(0,d.Lk)("div",se,[ie,(0,d.Lk)("ul",ce,[de,(0,d.Lk)("li",null,[(0,d.Lk)("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=(...e)=>r.showModal&&r.showModal(...e))},"Remove page")])])])]),(0,d.Lk)("div",ue,[(0,d.Lk)("div",ve,[(0,d.Lk)("div",pe,[he,ge,(0,d.Lk)("div",me,[fe,(0,d.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>r.confirmDelete&&r.confirmDelete(...e))},"Yes")])])])]),(0,d.Lk)("div",null,[be,(0,d.Lk)("ul",null,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.currentPage.engineersOnShift,(e=>((0,d.uX)(),(0,d.CE)("li",{key:e.id},(0,A.v_)(e.name),1)))),128))])]),((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.currentPage.clients,((e,t)=>((0,d.uX)(),(0,d.CE)("div",{key:t},[(0,d.Lk)("h6",null,(0,A.v_)(t),1),((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e,((e,t)=>((0,d.uX)(),(0,d.CE)("div",{key:t},[(0,d.bF)(l,null,{default:(0,d.k6)((()=>[(0,d.eW)((0,A.v_)(t),1)])),_:2},1024),(0,d.Lk)("ul",null,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e,(e=>((0,d.uX)(),(0,d.CE)("li",{key:e.id},(0,A.v_)(e.title)+" - "+(0,A.v_)(e.status),1)))),128))])])))),128))])))),128))])):((0,d.uX)(),(0,d.CE)("div",ke,"No data available"))])}var ye={computed:{...(0,i.aH)(["currentPage"])},methods:{showModal(){var e=new s.aF(document.getElementById("deleteModal"),{keyboard:!1});e.show()},confirmDelete(){console.log("Page deleted");var e=s.aF.getInstance(document.getElementById("deleteModal"));e.hide()}}};const we=(0,p.A)(ye,[["render",Le],["__scopeId","data-v-a08fea22"]]);var Ce=we,Pe={components:{NavBarComponent:$,SideBarComponent:te,shiftComp:Ce}};const Ee=(0,p.A)(Pe,[["render",S]]);var Se=Ee;const Ae=(0,m.aE)({history:(0,m.LA)("/"),routes:[{path:"/login",name:"Login",component:y},{path:"/",name:"Home",component:Se,meta:{requiresAuth:!0}}]});Ae.beforeEach(((e,t,a)=>{const n="true"===localStorage.getItem("userAuthenticated");e.matched.some((e=>e.meta.requiresAuth))&&!n?a("/login"):"/login"===e.path&&n?a("/"):a()}));var Ie=Ae;const _e=(0,n.Ef)(g);_e.use(Ie),_e.use(l()),_e.use(c),o.A.get("/auth/status").then((e=>{console.log("Authentication status:",e.data.authenticated),console.log("User:",e.data.user.name),e.data.authenticated?(localStorage.setItem("userAuthenticated","true"),localStorage.setItem("user",e.data.user.name),_e.mount("#app")):(localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),console.log(localStorage.getItem("user")),Ie.push("/login"),_e.mount("#app"))})).catch((e=>{console.error("Error checking authentication status:",e),localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),Ie.push("/login"),_e.mount("#app")}))}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],r=e[d][2];for(var s=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,l=n[0],s=n[1],i=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(i)var d=i(a)}for(t&&t(n);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(8960)}));n=a.O(n)})();
//# sourceMappingURL=app.c56d35f1.js.map