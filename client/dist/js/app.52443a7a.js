(function(){"use strict";var e={4337:function(e,t,a){a(4114);var o=a(3751),s=a(1250),n=a(414),r=a.n(n),l=a(6278),i=a(2543),d=a(6373);const c=(0,d.Ay)("localhost"===window.location.hostname?"http://localhost:3000":"https://sn-handover-app.azurewebsites.net",{transports:["websocket"],withCredentials:!0});var u=c;let m=null,p=null;const h=(0,l.y$)({state:{pages:[],shifts:[],currentPage:null,toasts:[],toastId:0,searchResults:[],currentShift:null,incidents:[],usersOnPage:[],lastUpdateSource:"server"},mutations:{setPages(e,t){e.pages=t},setCurrentPage(e,t){e.currentPage=t},addPage(e,t){e.pages.push(t)},setShifts(e,t){e.shifts=t},setCurrentShift(e,t){e.currentShift=t},updatePage(e,t){const a=e.pages.findIndex((e=>e.id===t.id));-1!==a&&e.pages.splice(a,1,t)},addShift(e,t){e.shifts.push(t)},updateShift(e,t){const a=e.shifts.findIndex((e=>e.id===t.id));-1!==a&&e.shifts.splice(a,1,t)},addToast(e,t){const a=e.toastId++;t.id=a,e.toasts.push(t),setTimeout((()=>{e.toasts=e.toasts.filter((e=>e.id!==a))}),3e3)},setUsersOnPage(e,t){JSON.stringify(e.usersOnPage)!==JSON.stringify(t)&&(console.log("Setting users on page:",t),e.usersOnPage=t)},setSearchResults(e,t){e.searchResults=t},setIncidents(e,t){e.incidents=t},setLastUpdateSource(e,t){e.lastUpdateSource=t},deletePage(e,t){e.pages=e.pages.filter((e=>e.id!==t)),e.currentPage&&e.currentPage.id===t&&(e.currentPage=null)}},actions:{async deletePage({commit:e},{pageId:t}){try{const a=await fetch(`/api/records/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!a.ok){const e=await a.text();throw new Error(`Failed to delete page: ${e}`)}e("deletePage",t)}catch(a){throw console.error("Error deleting the page:",a),a}},async fetchPages({commit:e,dispatch:t}){try{console.log(localStorage.getItem("user"));const a=await fetch("/api/records");if(!a.ok)throw new Error("Network response was not ok");const o=await a.json();e("setPages",o),o.length>0&&t("fetchPageDetails",o[0].id)}catch(a){console.error("Error fetching pages:",a),e("addToast",{message:`Fetch pages error: ${a.message}`,type:"danger"})}},debouncedPerformSearch:(0,i.debounce)((async function({commit:e},t){try{const a=await fetch(`/api/search?q=${encodeURIComponent(t)}`);if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);const o=await a.json();e("setSearchResults",o)}catch(a){console.error("Search error: Record not found"),e("addToast",{message:"Search error: Record not found",type:"danger"})}}),200),async fetchPageDetails({commit:e},t){p&&u.emit("leavePage",{pageId:p});try{const o=await fetch(`/api/records/${t}`);if(!o.ok)throw new Error(`HTTP status: ${o.status}`);const s=await o.text();try{const t=JSON.parse(s);console.log("Received response:",t),e("setCurrentPage",t),u.emit("viewPage",{pageId:t.id}),p=t.id,m&&(console.log("Removing previous usersOnPage listener"),u.off("usersOnPage",m)),m=t=>{console.log("Users on page event received:",t),e("setUsersOnPage",t)},u.on("usersOnPage",m)}catch(a){console.error("Error parsing JSON:",a),e("addToast",{message:`JSON parse error: ${a.message}`,type:"danger"})}}catch(o){console.error("Network or response error:",o),e("addToast",{message:`Network error: ${o.message}`,type:"danger"})}},async fetchLatestPage({commit:e}){try{const e=await fetch("/api/latest-page");if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();return t}catch(t){console.error("Error fetching latest page:",t),e("addToast",{message:`Fetch latest page error: ${t.message}`,type:"danger"})}},debouncedUpdatePageDetails:(0,i.debounce)((async function({commit:e},{page:t,source:a}){try{const o=await fetch(`/api/records/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,source:a})});if(!o.ok)throw new Error("Network response was not ok");const s=await o.json();e("setCurrentPage",s),e("updatePage",s)}catch(o){console.error("Error updating page details:",o),e("addToast",{message:`Update page error: ${o.message}`,type:"danger"})}}),200),debouncedCopyHandover:(0,i.debounce)((async function({commit:e}){try{const t=await fetch("/api/copy-handover",{method:"POST"}),a=await t.json();if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e("setCurrentPage",a)}catch(t){console.error("Error creating handover from template:",t),e("addToast",{message:`Copy handover error: ${t.message}`,type:"danger"})}}),200),debouncedCreateHandoverTemplate:(0,i.debounce)((async function({commit:e}){try{const t=await fetch("/api/copy-template",{method:"POST"}),a=await t.json();e("setCurrentPage",a)}catch(t){console.error("Error creating handover from template:",t),e("addToast",{message:`Create template error: ${t.message}`,type:"danger"})}}),200),async fetchShifts({commit:e}){try{const t=await fetch("/api/shifts");if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();e("setShifts",a)}catch(t){console.error("Error fetching shifts:",t),e("addToast",{message:`Fetch shifts error: ${t.message}`,type:"danger"})}},async fetchShiftDetails({commit:e},t){try{const a=await fetch(`/api/shifts/${t}`);if(!a.ok)throw new Error(`HTTP status: ${a.status}`);const o=await a.json();e("setCurrentShift",o)}catch(a){console.error("Error fetching shift details:",a),e("addToast",{message:`Fetch shift details error: ${a.message}`,type:"danger"})}},async createShift({commit:e},t){try{const a=await fetch("/api/shifts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Network response was not ok");const o=await a.json();e("addShift",o),e("setCurrentShift",o),e("addToast",{message:"Shift created successfully.",type:"success"})}catch(a){console.error("Error creating shift:",a),e("addToast",{message:`Create shift error: ${a.message}`,type:"danger"})}},async updateShiftDetails({commit:e},t){try{const a=await fetch(`/api/shifts/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Network response was not ok");const o=await a.json();e("setCurrentShift",o),e("updateShift",o),e("addToast",{message:"Shift details updated successfully.",type:"success"})}catch(a){console.error("Error updating shift details:",a),e("addToast",{message:`Update shift error: ${a.message}`,type:"danger"})}}}});u.on("connect",(()=>{console.log("Socket.io connected")})),u.on("disconnect",(()=>{console.log("Socket.io disconnected"),u.connect()})),u.on("usersOnPage",(e=>{h.commit("setUsersOnPage",e)})),u.on("pageCreated",(e=>{console.log("Page created event received:",e);const t=h.state.pages.some((t=>t.id===e.id));t||(h.commit("addPage",e),h.commit("addToast",{message:"Handover copied successfully.",type:"success"}))})),u.on("pageUpdated",(e=>{console.log("Page updated event received:",e),"client"!==h.state.lastUpdateSource&&(h.commit("updatePage",e),h.state.currentPage&&h.state.currentPage.id===e.id&&h.commit("setCurrentPage",e)),h.commit("addToast",{message:`Page ${e.title} updated`,type:"success"}),h.commit("setLastUpdateSource","server")})),u.removeAllListeners("pageDeleted"),u.on("pageDeleted",(e=>{console.log("Page deleted event received:",e),e.title&&"undefined"!==e.title&&h.commit("addToast",{message:`Page "${e.title}" deleted successfully.`,type:"danger"}),h.commit("deletePage",e.id)}));var g=h,b=a(641),v=a(33);const k={id:"app"},f={class:"toast-container position-fixed bottom-0 end-0 p-3"},L=["data-id"],y={class:"d-flex"},w={class:"toast-body"},P=(0,b.Lk)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function C(e,t,a,o,s,n){const r=(0,b.g2)("router-view");return(0,b.uX)(),(0,b.CE)("div",k,[(0,b.bF)(r),(0,b.Lk)("div",f,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.toasts,(e=>((0,b.uX)(),(0,b.CE)("div",{key:e.id,"data-id":e.id,class:(0,v.C4)(["toast",`bg-${e.type}`])},[(0,b.Lk)("div",y,[(0,b.Lk)("div",w,(0,v.v_)(e.message),1),P])],10,L)))),128))])])}var S={name:"App",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},computed:{...(0,l.aH)(["toasts"])},watch:{toasts:{immediate:!0,deep:!0,handler(e){e.forEach((e=>{this.initializeToast(e)}))}}},methods:{checkAuthentication(){this.isAuthenticated=!!localStorage.getItem("userAuthenticated"),this.isAuthenticated||this.$router.push("/login")},initializeToast(e){this.$nextTick((()=>{const t=document.querySelector(`.toast[data-id="${e.id}"]`);if(t){const e=new(r().Toast)(t);e.show()}else console.error("Toast element not found",e)}))}}},E=a(6262);const I=(0,E.A)(S,[["render",C]]);var N=I,D=a(5220);const U={class:"login-container"};function A(e,t,a,o,s,n){return(0,b.uX)(),(0,b.CE)("div",U,[(0,b.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.login&&n.login(...e))},"Log in with Azure AD")])}var T={methods:{login(){window.location.href="/auth/signin"}}};const x=(0,E.A)(T,[["render",A],["__scopeId","data-v-9377a308"]]);var q=x;const $={id:"home-container"},M={class:"main-container"},O={class:"sidebar"},R={class:"content"};function X(e,t,a,o,s,n){const r=(0,b.g2)("NavBarComponent"),l=(0,b.g2)("SideBarComponent"),i=(0,b.g2)("shiftComp");return(0,b.uX)(),(0,b.CE)("div",$,[(0,b.bF)(r),(0,b.Lk)("div",M,[(0,b.Lk)("aside",O,[(0,b.bF)(l)]),(0,b.Lk)("div",R,[(0,b.bF)(i)])])])}const V=e=>((0,b.Qi)("data-v-3c646329"),e=e(),(0,b.jt)(),e),_={class:"navbar navbar-expand-lg bg-light"},J={class:"container-fluid"},F=V((()=>(0,b.Lk)("a",{class:"navbar-brand",href:"/"},"Handover pages",-1))),j=V((()=>(0,b.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,b.Lk)("span",{class:"navbar-toggler-icon"})],-1))),H={class:"collapse navbar-collapse justify-content-between",id:"navbarSupportedContent"},B={class:"navbar-nav"},Q={class:"nav-item"},K={key:0,class:"search-results"},z=["onClick"],W={class:"navbar-nav"},Y={class:"nav-item dropdown"},G={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Z=V((()=>(0,b.Lk)("ul",{class:"dropdown-menu dropdown-menu-end","aria-labelledby":"navbarDropdownMenuLink"},[(0,b.Lk)("li",null,[(0,b.Lk)("a",{class:"dropdown-item",href:"/auth/signout"},"Sign out")])],-1)));function ee(e,t,a,s,n,r){const l=(0,b.g2)("SLAProgressModal");return(0,b.uX)(),(0,b.CE)("nav",_,[(0,b.Lk)("div",J,[F,j,(0,b.Lk)("div",H,[(0,b.Lk)("ul",B,[(0,b.Lk)("li",Q,[(0,b.Lk)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[0]||(t[0]=(...e)=>r.openSlaModal&&r.openSlaModal(...e))},"SLA Progress")])]),(0,b.Lk)("form",{class:"d-flex justify-content-center flex-grow-1 mx-3",role:"search",onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>r.performSearch&&r.performSearch(...e)),["prevent"]))},[(0,b.bo)((0,b.Lk)("input",{class:"form-control w-100","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchTerm=e),type:"search",placeholder:"Search","aria-label":"Search",onKeyup:t[2]||(t[2]=(0,o.jR)(((...e)=>r.performSearch&&r.performSearch(...e)),["enter"]))},null,544),[[o.Jo,n.searchTerm]]),r.searchResults.length?((0,b.uX)(),(0,b.CE)("div",K,[(0,b.Lk)("ul",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(r.searchResults,(e=>((0,b.uX)(),(0,b.CE)("li",{key:e.id},[(0,b.Lk)("a",{href:"#",onClick:(0,o.D$)((t=>r.loadPage(e.id)),["prevent"])},(0,v.v_)(e.title),9,z)])))),128))])])):(0,b.Q3)("",!0)],32),(0,b.Lk)("ul",W,[(0,b.Lk)("li",Y,[(0,b.Lk)("a",G,(0,v.v_)(n.userProfile.displayName),1),Z])])]),(0,b.bF)(l,{ref:"slaModal"},null,512)])])}const te=e=>((0,b.Qi)("data-v-6aae2256"),e=e(),(0,b.jt)(),e),ae={class:"modal fade",id:"slaProgressModal",tabindex:"-1","aria-labelledby":"slaProgressModalLabel","aria-hidden":"true"},oe={class:"modal-dialog modal-xl"},se={class:"modal-content"},ne=te((()=>(0,b.Lk)("div",{class:"modal-header"},[(0,b.Lk)("h5",{class:"modal-title",id:"slaProgressModalLabel"},"Incident SLA Progress"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),re={class:"modal-body"},le={class:"table"},ie=te((()=>(0,b.Lk)("thead",null,[(0,b.Lk)("tr",null,[(0,b.Lk)("th",null,"Incident Number"),(0,b.Lk)("th",null,"Status"),(0,b.Lk)("th",null,"Date Opened"),(0,b.Lk)("th",null,"Priority"),(0,b.Lk)("th",null,"SLA Progress")])],-1))),de={class:"progress"},ce=["aria-valuenow"];function ue(e,t,a,o,s,n){return(0,b.uX)(),(0,b.CE)("div",null,[(0,b.Lk)("div",ae,[(0,b.Lk)("div",oe,[(0,b.Lk)("div",se,[ne,(0,b.Lk)("div",re,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(s.groupedIncidents,((e,t)=>((0,b.uX)(),(0,b.CE)("div",{key:t},[(0,b.Lk)("h5",null,(0,v.v_)(t),1),(0,b.Lk)("table",le,[ie,(0,b.Lk)("tbody",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e,(e=>((0,b.uX)(),(0,b.CE)("tr",{key:e.incNumber},[(0,b.Lk)("td",null,(0,v.v_)(e.incNumber),1),(0,b.Lk)("td",null,(0,v.v_)(e.status),1),(0,b.Lk)("td",null,(0,v.v_)(n.formatDate(e.dateOpened)),1),(0,b.Lk)("td",null,(0,v.v_)(e.priority),1),(0,b.Lk)("td",null,[(0,b.Lk)("div",de,[(0,b.Lk)("div",{class:(0,v.C4)(["progress-bar",n.slaProgressClass(e)]),style:(0,v.Tr)({width:n.calculateSLAProgress(e)+"%"}),role:"progressbar","aria-valuenow":n.calculateSLAProgress(e),"aria-valuemin":"0","aria-valuemax":"100"},(0,v.v_)(n.calculateSLAProgress(e))+"% ",15,ce)])])])))),128))])])])))),128))])])])])])}var me={name:"SLAProgressModal",data(){return{groupedIncidents:{}}},methods:{...(0,l.i0)(["fetchLatestPage"]),async openSlaModal(){const e=await this.fetchLatestPage(),t={};e.records.incidents.forEach((e=>{"Resolved"!==e.status&&(t[e.client]||(t[e.client]=[]),t[e.client].push(e))})),this.groupedIncidents=t;const a=new(r().Modal)(document.getElementById("slaProgressModal"));a.show()},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},calculateSLAProgress(e){const t={"P1 - Critical":180,"P2 - high":480,"P3 - moderate":1440,"P4 - Low":2400},a=new Date(e.dateOpened),o=new Date,s=(o-a)/6e4,n=t[e.priority]||0,r=Math.min(s/n*100,100);return r.toFixed(2)},slaProgressClass(e){const t=this.calculateSLAProgress(e);return{"bg-success":t<=75,"bg-warning":t>50&&t<=90,"bg-danger":t>90}}}};const pe=(0,E.A)(me,[["render",ue],["__scopeId","data-v-6aae2256"]]);var he=pe,ge={name:"NavBarComponent",components:{SLAProgressModal:he},data(){return{userProfile:{displayName:localStorage.getItem("user")},searchTerm:""}},computed:{...(0,l.aH)(["searchResults"]),searchResults(){return this.$store.state.searchResults}},methods:{...(0,l.i0)(["debouncedPerformSearch","fetchPageDetails"]),loadPage(e){this.fetchPageDetails(e),this.clearSearchResults()},performSearch(){this.$store.dispatch("debouncedPerformSearch",this.searchTerm)},openSlaModal(){this.$refs.slaModal.openSlaModal()},clearSearchResults(){this.$store.commit("setSearchResults",[])},handleClickOutside(e){this.$el.contains(e.target)||this.clearSearchResults()}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const be=(0,E.A)(ge,[["render",ee],["__scopeId","data-v-3c646329"]]);var ve=be;const ke=e=>((0,b.Qi)("data-v-451ccdc3"),e=e(),(0,b.jt)(),e),fe={class:"sidebar-comp d-flex flex-column"},Le={class:"flex-shrink-0 p-3 bg-light"},ye={class:"pb-3 mb-3 border-bottom"},we={class:"nav-pills-wrapper flex-grow-1 overflow-auto"},Pe={class:"nav nav-pills flex-column"},Ce=["onClick"],Se=ke((()=>(0,b.Lk)("button",{class:"btn btn-secondary dropdown-toggle w-100",type:"button",id:"dropupMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"}," New Page ",-1))),Ee={class:"dropdown-menu w-100","aria-labelledby":"dropupMenuButton"};function Ie(e,t,a,s,n,r){return(0,b.uX)(),(0,b.CE)("div",fe,[(0,b.Lk)("div",Le,[(0,b.Lk)("div",ye,[(0,b.bo)((0,b.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),type:"text",class:"form-control",placeholder:"Enter page title"},null,512),[[o.Jo,n.searchQuery]])])]),(0,b.Lk)("div",we,[(0,b.Lk)("ul",Pe,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(r.filteredPages,(t=>((0,b.uX)(),(0,b.CE)("li",{class:"nav-item",key:t.id},[(0,b.Lk)("a",{href:"#",class:(0,v.C4)(["nav-link link-dark",{active:t.id===e.currentPage?.id}]),onClick:e=>r.loadPage(t.id)},(0,v.v_)(t.title),11,Ce)])))),128))])]),(0,b.Lk)("div",{class:(0,v.C4)({dropup:!0,disabled:!r.isEngineer})},[Se,(0,b.Lk)("ul",Ee,[(0,b.Lk)("li",null,[(0,b.Lk)("a",{class:"dropdown-item",href:"#",onClick:t[1]||(t[1]=(...e)=>r.createNewHandoverWithData&&r.createNewHandoverWithData(...e))},"Copy last handover")]),(0,b.Lk)("li",null,[(0,b.Lk)("a",{class:"dropdown-item",href:"#",onClick:t[2]||(t[2]=(...e)=>r.createNewTemplateHandover&&r.createNewTemplateHandover(...e))},"Create a new page")])])],2)])}var Ne={name:"SidebarComponent",data(){return{searchQuery:"",userProfile:{role:localStorage.getItem("roles")},socketId:null}},computed:{...(0,l.aH)(["pages","currentPage"]),filteredPages(){const e=[...this.pages].sort(((e,t)=>new Date(t.date)-new Date(e.date)));return this.searchQuery?e.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase()))):e},isEngineer(){return"Engineer"===this.userProfile.role}},methods:{...(0,l.i0)(["fetchPages","fetchPageDetails","debouncedCreateHandoverTemplate","debouncedCopyHandover","addToast"]),...(0,l.PY)(["setCurrentPage"]),loadPage(e){const t=localStorage.getItem("userName");this.fetchPageDetails(e),this.$socket.emit("viewPage",{pageId:e,userName:t}),console.log(this.userProfile.role)},createNewHandoverWithData(){this.debouncedCopyHandover().then((e=>{this.setCurrentPage(e)})).catch((e=>{this.addToast({message:`Error: ${e.message}`,type:"danger"})}))},createNewTemplateHandover(){this.debouncedCreateHandoverTemplate().then((e=>{this.setCurrentPage(e)})).catch((e=>{this.addToast({message:`Failed to create template ${e.message}`,type:"danger"})}))}},created(){this.fetchPages(),this.$socket.on("connect",(()=>{this.socketId=this.$socket.id})),this.$socket.on("pageCreated",(e=>{e.createdBy!==this.socketId?this.addToast({message:"A new handover page was created.",type:"success"}):this.setCurrentPage(e)})),this.$socket.on("pageDeleted",(e=>{this.$store.commit("deletePage",e.id),this.addToast({message:`Page "${e.title}" has been deleted.`,type:"danger"})}))},beforeUnmount(){this.$socket.off("pageCreated"),this.$socket.off("pageDeleted"),this.$socket.off("usersOnPage")}};const De=(0,E.A)(Ne,[["render",Ie],["__scopeId","data-v-451ccdc3"]]);var Ue=De;const Ae=e=>((0,b.Qi)("data-v-189b7d6e"),e=e(),(0,b.jt)(),e),Te={id:"content-container",class:"container mt-4"},xe={key:0,class:"main-container"},qe={class:"header"},$e=(0,b.Fv)('<div class="dropdown-add" data-v-189b7d6e><button class="btn btn-link text-decoration-none" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false" data-v-189b7d6e><i class="bi bi-plus-lg" data-v-189b7d6e></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton" data-v-189b7d6e><li data-v-189b7d6e><a class="dropdown-item" id="add-inc-btn" href="#" data-bs-toggle="modal" data-bs-target="#addIncidentModal" data-v-189b7d6e>Add Incident</a></li><li data-v-189b7d6e><a class="dropdown-item" id="add-prb-btn" href="#" data-bs-toggle="modal" data-bs-target="#addProblemModal" data-v-189b7d6e>Add Problem</a></li><li data-v-189b7d6e><a class="dropdown-item" id="add-chg-btn" href="#" data-bs-toggle="modal" data-bs-target="#addChangeModal" data-v-189b7d6e>Add Change</a></li><li data-v-189b7d6e><a class="dropdown-item" id="add-req-btn" href="#" data-bs-toggle="modal" data-bs-target="#addRequestModal" data-v-189b7d6e>Add Service Request</a></li></ul></div>',1),Me=(0,b.Fv)('<button class="btn btn-link text-decoration-none" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false" data-v-189b7d6e><i class="bi bi-upload" data-v-189b7d6e></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton" data-v-189b7d6e><li data-v-189b7d6e><a class="dropdown-item" id="add-inc-btn" href="#" data-bs-toggle="modal" data-bs-target="#importModal" data-v-189b7d6e>Import Incidents</a></li><li data-v-189b7d6e><a class="dropdown-item" id="add-prb-btn" href="#" data-bs-toggle="modal" data-bs-target="#" data-v-189b7d6e>Import Problems</a></li><li data-v-189b7d6e><a class="dropdown-item" id="add-chg-btn" href="#" data-bs-toggle="modal" data-bs-target="#" data-v-189b7d6e>Import Changes</a></li><li data-v-189b7d6e><a class="dropdown-item" id="add-req-btn" href="#" data-bs-toggle="modal" data-bs-target="#" data-v-189b7d6e>Import Service Requests</a></li></ul>',2),Oe=[Me],Re={class:"dropdown"},Xe=Ae((()=>(0,b.Lk)("button",{class:"btn btn-link text-decoration-none",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,b.Lk)("i",{class:"bi bi-three-dots-vertical"})],-1))),Ve={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton"},_e=Ae((()=>(0,b.Lk)("li",null,[(0,b.Lk)("hr",{class:"dropdown-divider"})],-1))),Je={class:"modal fade",id:"addIncidentModal",tabindex:"-1","aria-labelledby":"addIncidentModalLabel","aria-hidden":"true"},Fe={class:"modal-dialog"},je={class:"modal-content"},He=Ae((()=>(0,b.Lk)("div",{class:"modal-header"},[(0,b.Lk)("h5",{class:"modal-title",id:"addIncidentModalLabel"},"Add Incident"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Be={class:"modal-body"},Qe={class:"mb-3"},Ke=Ae((()=>(0,b.Lk)("label",{for:"clientSelect",class:"form-label"},"Client",-1))),ze=Ae((()=>(0,b.Lk)("option",null,"Client1",-1))),We=[ze],Ye={class:"mb-3"},Ge=Ae((()=>(0,b.Lk)("label",{for:"incidentNumber",class:"form-label"},"Incident Number",-1))),Ze={class:"mb-3"},et=Ae((()=>(0,b.Lk)("label",{for:"status",class:"form-label"},"Status",-1))),tt=Ae((()=>(0,b.Lk)("option",{value:"Active"},"Active",-1))),at=Ae((()=>(0,b.Lk)("option",{value:"Awaiting user info"},"Awaiting User Info",-1))),ot=Ae((()=>(0,b.Lk)("option",{value:"Awaiting third party"},"Awaiting Third Party",-1))),st=Ae((()=>(0,b.Lk)("option",{value:"Resolved"},"Resolved",-1))),nt=[tt,at,ot,st],rt={class:"mb-3"},lt=Ae((()=>(0,b.Lk)("label",{for:"dateOpened",class:"form-label"},"Date Opened",-1))),it=["max"],dt={class:"mb-3"},ct=Ae((()=>(0,b.Lk)("label",{for:"priority",class:"form-label"},"Priority",-1))),ut=Ae((()=>(0,b.Lk)("option",{value:"P4 - Low"},"P4 - Low",-1))),mt=Ae((()=>(0,b.Lk)("option",{value:"P3 - moderate"},"P3 - moderate",-1))),pt=Ae((()=>(0,b.Lk)("option",{value:"P2 - high"},"P2 - high",-1))),ht=Ae((()=>(0,b.Lk)("option",{value:"P1 - Critical"},"P1 - Critical",-1))),gt=[ut,mt,pt,ht],bt={class:"mb-3"},vt=Ae((()=>(0,b.Lk)("label",{for:"mainProblem",class:"form-label"},"Main Problem",-1))),kt={class:"mb-3"},ft=Ae((()=>(0,b.Lk)("label",{for:"notes",class:"form-label"},"Notes",-1))),Lt=Ae((()=>(0,b.Lk)("div",{class:"modal-footer"},[(0,b.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),(0,b.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save")],-1))),yt={class:"modal fade",id:"importModal",tabindex:"-1","aria-labelledby":"importModalLabel","aria-hidden":"true"},wt={class:"modal-dialog"},Pt={class:"modal-content"},Ct=Ae((()=>(0,b.Lk)("div",{class:"modal-header"},[(0,b.Lk)("h5",{class:"modal-title",id:"importModalLabel"},"Import Incidents"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),St={class:"modal-body"},Et={class:"mb-3"},It=Ae((()=>(0,b.Lk)("label",{for:"clientNameInput",class:"form-label"},"Client Name",-1))),Nt={class:"modal-footer"},Dt=Ae((()=>(0,b.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1))),Ut={class:"modal fade",id:"addProblemModal",tabindex:"-1","aria-labelledby":"addProblemModalLabel","aria-hidden":"true"},At={class:"modal-dialog"},Tt={class:"modal-content"},xt=Ae((()=>(0,b.Lk)("div",{class:"modal-header"},[(0,b.Lk)("h5",{class:"modal-title",id:"addProblemModalLabel"},"Add Problem"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),qt={class:"modal-body"},$t={class:"mb-3"},Mt=Ae((()=>(0,b.Lk)("label",{for:"clientSelect",class:"form-label"},"Client",-1))),Ot=Ae((()=>(0,b.Lk)("option",null,"Client1",-1))),Rt=[Ot],Xt={class:"mb-3"},Vt=Ae((()=>(0,b.Lk)("label",{for:"problemNumber",class:"form-label"},"Problem Number",-1))),_t={class:"mb-3"},Jt=Ae((()=>(0,b.Lk)("label",{for:"status",class:"form-label"},"Status",-1))),Ft=(0,b.Fv)('<option value="Evaluate" data-v-189b7d6e>Evaluate</option><option value="On Hold" data-v-189b7d6e>On Hold</option><option value="Investigate" data-v-189b7d6e>Investigate</option><option value="Review" data-v-189b7d6e>Review</option><option value="Remediate" data-v-189b7d6e>Remediate</option><option value="Resolved" data-v-189b7d6e>Resolved</option>',6),jt=[Ft],Ht={class:"mb-3"},Bt=Ae((()=>(0,b.Lk)("label",{for:"priority",class:"form-label"},"Priority",-1))),Qt=Ae((()=>(0,b.Lk)("option",{value:"P4 - Low"},"P4 - Low",-1))),Kt=Ae((()=>(0,b.Lk)("option",{value:"P3 - moderate"},"P3 - moderate",-1))),zt=Ae((()=>(0,b.Lk)("option",{value:"P2 - high"},"P2 - high",-1))),Wt=Ae((()=>(0,b.Lk)("option",{value:"P1 - Critical"},"P1 - Critical",-1))),Yt=[Qt,Kt,zt,Wt],Gt={class:"mb-3"},Zt=Ae((()=>(0,b.Lk)("label",{for:"rca",class:"form-label"},"Root cause analysis",-1))),ea={class:"mb-3"},ta=Ae((()=>(0,b.Lk)("label",{for:"notes",class:"form-label"},"Notes",-1))),aa=Ae((()=>(0,b.Lk)("div",{class:"modal-footer"},[(0,b.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),(0,b.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save")],-1))),oa={class:"modal fade",id:"addChangeModal",tabindex:"-1","aria-labelledby":"addChangeModalLabel","aria-hidden":"true"},sa={class:"modal-dialog"},na={class:"modal-content"},ra=Ae((()=>(0,b.Lk)("div",{class:"modal-header"},[(0,b.Lk)("h5",{class:"modal-title",id:"addChangeModalLabel"},"Add Change"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),la={class:"modal-body"},ia={class:"mb-3"},da=Ae((()=>(0,b.Lk)("label",{for:"clientSelect",class:"form-label"},"Client",-1))),ca=Ae((()=>(0,b.Lk)("option",null,"Client1",-1))),ua=[ca],ma={class:"mb-3"},pa=Ae((()=>(0,b.Lk)("label",{for:"changeNumber",class:"form-label"},"Change Number",-1))),ha={class:"mb-3"},ga=Ae((()=>(0,b.Lk)("label",{for:"status",class:"form-label"},"Status",-1))),ba=(0,b.Fv)('<option value="New" data-v-189b7d6e>New</option><option value="Assess" data-v-189b7d6e>Assess</option><option value="Authorize" data-v-189b7d6e>Authorize</option><option value="Scheduled" data-v-189b7d6e>Scheduled</option><option value="Implement" data-v-189b7d6e>Implement</option><option value="Review" data-v-189b7d6e>Review</option><option value="Closed" data-v-189b7d6e>Closed</option>',7),va=[ba],ka={class:"mb-3"},fa=Ae((()=>(0,b.Lk)("label",{for:"startDate",class:"form-label"},"Start Date",-1))),La={class:"mb-3"},ya=Ae((()=>(0,b.Lk)("label",{for:"endDate",class:"form-label"},"End Date",-1))),wa={class:"mb-3"},Pa=Ae((()=>(0,b.Lk)("label",{for:"notes",class:"form-label"},"Notes",-1))),Ca=Ae((()=>(0,b.Lk)("div",{class:"modal-footer"},[(0,b.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),(0,b.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save")],-1))),Sa={class:"modal fade",id:"addRequestModal",tabindex:"-1","aria-labelledby":"addRequestModalLabel","aria-hidden":"true"},Ea={class:"modal-dialog"},Ia={class:"modal-content"},Na=Ae((()=>(0,b.Lk)("div",{class:"modal-header"},[(0,b.Lk)("h5",{class:"modal-title",id:"addRequestModalLabel"},"Add Service Request"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Da={class:"modal-body"},Ua={class:"mb-3"},Aa=Ae((()=>(0,b.Lk)("label",{for:"clientSelect",class:"form-label"},"Client",-1))),Ta=Ae((()=>(0,b.Lk)("option",null,"Client1",-1))),xa=[Ta],qa={class:"mb-3"},$a=Ae((()=>(0,b.Lk)("label",{for:"ritmNumber",class:"form-label"},"Service Request Number",-1))),Ma={class:"mb-3"},Oa=Ae((()=>(0,b.Lk)("label",{for:"status",class:"form-label"},"Status",-1))),Ra=(0,b.Fv)('<option value="Draft" data-v-189b7d6e>Draft</option><option value="Awaiting Approval" data-v-189b7d6e>Awaiting Approval</option><option value="Pending" data-v-189b7d6e>Pending</option><option value="Work in Progress" data-v-189b7d6e>Work in Progress</option><option value="Closed" data-v-189b7d6e>Closed</option>',5),Xa=[Ra],Va={class:"mb-3"},_a=Ae((()=>(0,b.Lk)("label",{for:"notes",class:"form-label"},"Short request description",-1))),Ja={class:"mb-3"},Fa=Ae((()=>(0,b.Lk)("label",{for:"notes",class:"form-label"},"Notes",-1))),ja=Ae((()=>(0,b.Lk)("div",{class:"modal-footer"},[(0,b.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),(0,b.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save")],-1))),Ha={class:"modal fade",id:"removePageModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ba={class:"modal-dialog modal-dialog-centered"},Qa={class:"modal-content"},Ka={class:"modal-body"},za={class:"modal-footer"},Wa=Ae((()=>(0,b.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1))),Ya={class:"toast-container position-fixed bottom-0 end-0 p-3"},Ga={id:"liveToast",class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},Za=Ae((()=>(0,b.Lk)("div",{class:"toast-header"},[(0,b.Lk)("strong",{class:"me-auto"},"Bootstrap"),(0,b.Lk)("small",null,"11 mins ago"),(0,b.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1))),eo={class:"toast-body"},to=Ae((()=>(0,b.Lk)("h5",null,"Engineers on Shift",-1))),ao={key:0},oo={key:1},so=["value"],no={key:0},ro=Ae((()=>(0,b.Lk)("h6",null,"Incidents",-1))),lo={class:"table table-fixed"},io=Ae((()=>(0,b.Lk)("thead",null,[(0,b.Lk)("tr",null,[(0,b.Lk)("th",null,"Incident Number"),(0,b.Lk)("th",null,"Status"),(0,b.Lk)("th",null,"Priority"),(0,b.Lk)("th",null,"Date Opened"),(0,b.Lk)("th",{class:"main-problem"},"Main Problem"),(0,b.Lk)("th",null,"Notes")])],-1))),co={key:0},uo={key:1},mo=["onUpdate:modelValue"],po=Ae((()=>(0,b.Lk)("option",{value:"Active"},"Active",-1))),ho=Ae((()=>(0,b.Lk)("option",{value:"Awaiting user info"},"Awaiting User Info",-1))),go=Ae((()=>(0,b.Lk)("option",{value:"Awaiting third party"},"Awaiting Third Party",-1))),bo=Ae((()=>(0,b.Lk)("option",{value:"Resolved"},"Resolved",-1))),vo=[po,ho,go,bo],ko={key:0},fo={key:1},Lo=["onUpdate:modelValue"],yo=Ae((()=>(0,b.Lk)("option",{value:"P4 - Low"},"P4 - Low",-1))),wo=Ae((()=>(0,b.Lk)("option",{value:"P3 - moderate"},"P3 - moderate",-1))),Po=Ae((()=>(0,b.Lk)("option",{value:"P2 - high"},"P2 - high",-1))),Co=Ae((()=>(0,b.Lk)("option",{value:"P1 - Critical"},"P1 - Critical",-1))),So=[yo,wo,Po,Co],Eo={key:0},Io={key:1},No=["onUpdate:modelValue","max"],Do={class:"main-problem"},Uo={key:0},Ao={key:1},To=["onUpdate:modelValue"],xo={key:0},qo={key:1},$o=["onUpdate:modelValue"],Mo={key:1},Oo=Ae((()=>(0,b.Lk)("h6",null,"Problems",-1))),Ro={class:"table table-fixed"},Xo=Ae((()=>(0,b.Lk)("thead",null,[(0,b.Lk)("tr",null,[(0,b.Lk)("th",null,"Problem Number"),(0,b.Lk)("th",null,"Status"),(0,b.Lk)("th",null,"Priority"),(0,b.Lk)("th",null,"Root Cause analysis"),(0,b.Lk)("th",null,"Notes")])],-1))),Vo={key:0},_o={key:1},Jo=["onUpdate:modelValue"],Fo=Ae((()=>(0,b.Lk)("option",{value:"Active"},"Active",-1))),jo=Ae((()=>(0,b.Lk)("option",{value:"Awaiting user info"},"Awaiting User Info",-1))),Ho=Ae((()=>(0,b.Lk)("option",{value:"Awaiting third party"},"Awaiting Third Party",-1))),Bo=Ae((()=>(0,b.Lk)("option",{value:"Resolved"},"Resolved",-1))),Qo=[Fo,jo,Ho,Bo],Ko={key:0},zo={key:1},Wo=["onUpdate:modelValue"],Yo=Ae((()=>(0,b.Lk)("option",{value:"P4 - Low"},"P4 - Low",-1))),Go=Ae((()=>(0,b.Lk)("option",{value:"P3 - moderate"},"P3 - moderate",-1))),Zo=Ae((()=>(0,b.Lk)("option",{value:"P2 - high"},"P2 - high",-1))),es=Ae((()=>(0,b.Lk)("option",{value:"P1 - Critical"},"P1 - Critical",-1))),ts=[Yo,Go,Zo,es],as={key:0},os={key:1},ss=["onUpdate:modelValue"],ns={key:0},rs={key:1},ls=["onUpdate:modelValue"],is={key:2},ds=Ae((()=>(0,b.Lk)("h6",null,"Changes",-1))),cs={class:"table table-fixed"},us=Ae((()=>(0,b.Lk)("thead",null,[(0,b.Lk)("tr",null,[(0,b.Lk)("th",null,"Change Number"),(0,b.Lk)("th",null,"Status"),(0,b.Lk)("th",null,"Start Date"),(0,b.Lk)("th",null,"End Date"),(0,b.Lk)("th",null,"Notes")])],-1))),ms={key:0},ps={key:1},hs=["onUpdate:modelValue"],gs=(0,b.Fv)('<option value="New" data-v-189b7d6e>New</option><option value="Assess" data-v-189b7d6e>Assess</option><option value="Authorize" data-v-189b7d6e>Authorize</option><option value="Scheduled" data-v-189b7d6e>Scheduled</option><option value="Implement" data-v-189b7d6e>Implement</option><option value="Review" data-v-189b7d6e>Review</option><option value="Closed" data-v-189b7d6e>Closed</option>',7),bs=[gs],vs={key:0},ks={key:1},fs=["onUpdate:modelValue"],Ls={key:0},ys={key:1},ws=["onUpdate:modelValue"],Ps={key:0},Cs={key:1},Ss=["onUpdate:modelValue"],Es={key:3},Is=Ae((()=>(0,b.Lk)("h6",null,"Service Requests",-1))),Ns={class:"table table-fixed"},Ds=Ae((()=>(0,b.Lk)("thead",null,[(0,b.Lk)("tr",null,[(0,b.Lk)("th",null,"Request Number"),(0,b.Lk)("th",null,"Status"),(0,b.Lk)("th",{class:"short-request-description"},"Short request description"),(0,b.Lk)("th",null,"Notes")])],-1))),Us={key:0},As={key:1},Ts=["onUpdate:modelValue"],xs=(0,b.Fv)('<option value="Draft" data-v-189b7d6e>Draft</option><option value="Awaiting Approval" data-v-189b7d6e>Awaiting Approval</option><option value="Pending" data-v-189b7d6e>Pending</option><option value="Work in Progress" data-v-189b7d6e>Work in Progress</option><option value="Closed" data-v-189b7d6e>Closed</option>',5),qs=[xs],$s={class:"short-request-description"},Ms={key:0},Os={key:1},Rs=["onUpdate:modelValue"],Xs={key:0},Vs={key:1},_s=["onUpdate:modelValue"],Js={key:1};function Fs(e,t,a,s,n,r){return(0,b.uX)(),(0,b.CE)("div",Te,[e.currentPage?((0,b.uX)(),(0,b.CE)("div",xe,[(0,b.Lk)("div",qe,[(0,b.Lk)("h1",null,(0,v.v_)(e.currentPage.title),1),(0,b.Lk)("div",{class:(0,v.C4)({"dropwdowns-opt":!0,disabled:!r.isEngineer})},[$e,(0,b.Lk)("div",{class:(0,v.C4)({"dropdown-import":!0,disabled:!r.isEngineer})},Oe,2),(0,b.Lk)("div",Re,[Xe,(0,b.Lk)("ul",Ve,[(0,b.Lk)("li",null,[(0,b.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=(...e)=>r.toggleEditMode&&r.toggleEditMode(...e))},(0,v.v_)(n.editMode?"Save":"Edit"),1)]),_e,(0,b.Lk)("li",null,[(0,b.Lk)("a",{id:"remove-btn",href:"#",class:(0,v.C4)({"dropdown-item":!0,disabled:r.isEngineer}),"data-bs-toggle":"modal","data-bs-target":"#removePageModal"},"Remove page",2)])])])],2)]),(0,b.Lk)("div",Je,[(0,b.Lk)("div",Fe,[(0,b.Lk)("div",je,[He,(0,b.Lk)("div",Be,[(0,b.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>r.saveIncident&&r.saveIncident(...e)),["prevent"]))},[(0,b.Lk)("div",Qe,[Ke,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"clientSelect","onUpdate:modelValue":t[1]||(t[1]=e=>n.newIncident.client=e),required:""},We,512),[[o.u1,n.newIncident.client]])]),(0,b.Lk)("div",Ye,[Ge,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"incidentNumber","onUpdate:modelValue":t[2]||(t[2]=e=>n.newIncident.incNumber=e),required:""},null,512),[[o.Jo,n.newIncident.incNumber]])]),(0,b.Lk)("div",Ze,[et,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"status","onUpdate:modelValue":t[3]||(t[3]=e=>n.newIncident.status=e),required:""},nt,512),[[o.u1,n.newIncident.status]])]),(0,b.Lk)("div",rt,[lt,(0,b.bo)((0,b.Lk)("input",{type:"datetime-local",class:"form-control",id:"dateOpened","onUpdate:modelValue":t[4]||(t[4]=e=>n.newIncident.dateOpened=e),max:r.maxDate,required:""},null,8,it),[[o.Jo,n.newIncident.dateOpened]])]),(0,b.Lk)("div",dt,[ct,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"priority","onUpdate:modelValue":t[5]||(t[5]=e=>n.newIncident.priority=e),required:""},gt,512),[[o.u1,n.newIncident.priority]])]),(0,b.Lk)("div",bt,[vt,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"mainProblem","onUpdate:modelValue":t[6]||(t[6]=e=>n.newIncident.mainProblem=e),required:""},null,512),[[o.Jo,n.newIncident.mainProblem]])]),(0,b.Lk)("div",kt,[ft,(0,b.bo)((0,b.Lk)("textarea",{class:"form-control",id:"notes","onUpdate:modelValue":t[7]||(t[7]=e=>n.newIncident.notes=e),rows:"3"},null,512),[[o.Jo,n.newIncident.notes]])]),Lt],32)])])])]),(0,b.Lk)("div",yt,[(0,b.Lk)("div",wt,[(0,b.Lk)("div",Pt,[Ct,(0,b.Lk)("div",St,[(0,b.Lk)("div",Et,[It,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"clientNameInput","onUpdate:modelValue":t[9]||(t[9]=e=>n.clientName=e),placeholder:"Enter client name"},null,512),[[o.Jo,n.clientName]])]),(0,b.Lk)("input",{type:"file",onChange:t[10]||(t[10]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".json"},null,32)]),(0,b.Lk)("div",Nt,[Dt,(0,b.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=(...e)=>r.importIncidentRecords&&r.importIncidentRecords(...e))},"Import")])])])]),(0,b.Lk)("div",Ut,[(0,b.Lk)("div",At,[(0,b.Lk)("div",Tt,[xt,(0,b.Lk)("div",qt,[(0,b.Lk)("form",{onSubmit:t[18]||(t[18]=(0,o.D$)(((...e)=>r.saveProblem&&r.saveProblem(...e)),["prevent"]))},[(0,b.Lk)("div",$t,[Mt,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"clientSelect","onUpdate:modelValue":t[12]||(t[12]=e=>n.newProblem.client=e),required:""},Rt,512),[[o.u1,n.newProblem.client]])]),(0,b.Lk)("div",Xt,[Vt,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"problemNumber","onUpdate:modelValue":t[13]||(t[13]=e=>n.newProblem.prbNumber=e),required:""},null,512),[[o.Jo,n.newProblem.prbNumber]])]),(0,b.Lk)("div",_t,[Jt,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"status","onUpdate:modelValue":t[14]||(t[14]=e=>n.newProblem.status=e),required:""},jt,512),[[o.u1,n.newProblem.status]])]),(0,b.Lk)("div",Ht,[Bt,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"priority","onUpdate:modelValue":t[15]||(t[15]=e=>n.newProblem.priority=e),required:""},Yt,512),[[o.u1,n.newProblem.priority]])]),(0,b.Lk)("div",Gt,[Zt,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"rca","onUpdate:modelValue":t[16]||(t[16]=e=>n.newProblem.rca=e),required:""},null,512),[[o.Jo,n.newProblem.rca]])]),(0,b.Lk)("div",ea,[ta,(0,b.bo)((0,b.Lk)("textarea",{class:"form-control",id:"notes","onUpdate:modelValue":t[17]||(t[17]=e=>n.newProblem.notes=e),rows:"3"},null,512),[[o.Jo,n.newProblem.notes]])]),aa],32)])])])]),(0,b.Lk)("div",oa,[(0,b.Lk)("div",sa,[(0,b.Lk)("div",na,[ra,(0,b.Lk)("div",la,[(0,b.Lk)("form",{onSubmit:t[25]||(t[25]=(0,o.D$)(((...e)=>r.saveChange&&r.saveChange(...e)),["prevent"]))},[(0,b.Lk)("div",ia,[da,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"clientSelect","onUpdate:modelValue":t[19]||(t[19]=e=>n.newChange.client=e),required:""},ua,512),[[o.u1,n.newChange.client]])]),(0,b.Lk)("div",ma,[pa,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"changeNumber","onUpdate:modelValue":t[20]||(t[20]=e=>n.newChange.chgNumber=e),required:""},null,512),[[o.Jo,n.newChange.chgNumber]])]),(0,b.Lk)("div",ha,[ga,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"status","onUpdate:modelValue":t[21]||(t[21]=e=>n.newChange.status=e),required:""},va,512),[[o.u1,n.newChange.status]])]),(0,b.Lk)("div",ka,[fa,(0,b.bo)((0,b.Lk)("input",{type:"datetime-local",class:"form-control",id:"startDate","onUpdate:modelValue":t[22]||(t[22]=e=>n.newChange.startDate=e),required:""},null,512),[[o.Jo,n.newChange.startDate]])]),(0,b.Lk)("div",La,[ya,(0,b.bo)((0,b.Lk)("input",{type:"datetime-local",class:"form-control",id:"endDate","onUpdate:modelValue":t[23]||(t[23]=e=>n.newChange.endDate=e),required:""},null,512),[[o.Jo,n.newChange.endDate]])]),(0,b.Lk)("div",wa,[Pa,(0,b.bo)((0,b.Lk)("textarea",{class:"form-control",id:"notes","onUpdate:modelValue":t[24]||(t[24]=e=>n.newChange.notes=e),rows:"3"},null,512),[[o.Jo,n.newChange.notes]])]),Ca],32)])])])]),(0,b.Lk)("div",Sa,[(0,b.Lk)("div",Ea,[(0,b.Lk)("div",Ia,[Na,(0,b.Lk)("div",Da,[(0,b.Lk)("form",{onSubmit:t[31]||(t[31]=(0,o.D$)(((...e)=>r.saveRequest&&r.saveRequest(...e)),["prevent"]))},[(0,b.Lk)("div",Ua,[Aa,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"clientSelect","onUpdate:modelValue":t[26]||(t[26]=e=>n.newRequest.client=e),required:""},xa,512),[[o.u1,n.newRequest.client]])]),(0,b.Lk)("div",qa,[$a,(0,b.bo)((0,b.Lk)("input",{type:"text",class:"form-control",id:"ritmNumber","onUpdate:modelValue":t[27]||(t[27]=e=>n.newRequest.ritmNumber=e),required:""},null,512),[[o.Jo,n.newRequest.ritmNumber]])]),(0,b.Lk)("div",Ma,[Oa,(0,b.bo)((0,b.Lk)("select",{class:"form-select",id:"status","onUpdate:modelValue":t[28]||(t[28]=e=>n.newRequest.status=e),required:""},Xa,512),[[o.u1,n.newRequest.status]])]),(0,b.Lk)("div",Va,[_a,(0,b.bo)((0,b.Lk)("textarea",{class:"form-control",id:"notes","onUpdate:modelValue":t[29]||(t[29]=e=>n.newRequest.short_description=e),rows:"3",required:""},null,512),[[o.Jo,n.newRequest.short_description]])]),(0,b.Lk)("div",Ja,[Fa,(0,b.bo)((0,b.Lk)("textarea",{class:"form-control",id:"notes","onUpdate:modelValue":t[30]||(t[30]=e=>n.newRequest.notes=e),rows:"3"},null,512),[[o.Jo,n.newRequest.notes]])]),ja],32)])])])]),(0,b.Lk)("div",Ha,[(0,b.Lk)("div",Ba,[(0,b.Lk)("div",Qa,[(0,b.Lk)("div",Ka," Are you sure you want to remove "+(0,v.v_)(e.currentPage.title)+"? This action cannot be undone. ",1),(0,b.Lk)("div",za,[Wa,(0,b.Lk)("button",{type:"button",class:"btn btn-primary",id:"liveToastBtn",onClick:t[32]||(t[32]=(...e)=>r.removePage&&r.removePage(...e)),"data-bs-dismiss":"modal"},"Remove")])])])]),(0,b.Lk)("div",Ya,[(0,b.Lk)("div",Ga,[Za,(0,b.Lk)("div",eo,(0,v.v_)(e.currentPage.title)+" successfully deleted. ",1)])]),(0,b.Lk)("div",null,[to,n.editMode?((0,b.uX)(),(0,b.CE)("div",oo,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t[33]||(t[33]=t=>e.selectedShiftId=t),onChange:t[34]||(t[34]=(...e)=>r.updateEngineersOnShift&&r.updateEngineersOnShift(...e))},[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.shifts,(e=>((0,b.uX)(),(0,b.CE)("option",{key:e.id,value:e.id},(0,v.v_)(e.title),9,so)))),128))],544),[[o.u1,e.selectedShiftId]])])):((0,b.uX)(),(0,b.CE)("div",ao,[(0,b.Lk)("ul",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.currentPage.engineersOnShift,(e=>((0,b.uX)(),(0,b.CE)("li",{key:e.id},(0,v.v_)(e.name),1)))),128))])]))]),e.currentPage.records&&e.currentPage.records.incidents.length>0?((0,b.uX)(),(0,b.CE)("div",no,[ro,(0,b.Lk)("table",lo,[io,(0,b.Lk)("tbody",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.currentPage.records.incidents,(e=>((0,b.uX)(),(0,b.CE)("tr",{key:e.incNumber,required:""},[(0,b.Lk)("td",null,(0,v.v_)(e.incNumber),1),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",uo,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t=>e.status=t,required:""},vo,8,mo),[[o.u1,e.status]])])):((0,b.uX)(),(0,b.CE)("div",co,(0,v.v_)(e.status),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",fo,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t=>e.priority=t,required:""},So,8,Lo),[[o.u1,e.priority]])])):((0,b.uX)(),(0,b.CE)("div",ko,(0,v.v_)(e.priority),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",Io,[(0,b.bo)((0,b.Lk)("input",{type:"datetime-local",class:"form-control",id:"dateOpened","onUpdate:modelValue":t=>e.dateOpened=t,max:r.maxDate,required:""},null,8,No),[[o.Jo,e.dateOpened]])])):((0,b.uX)(),(0,b.CE)("div",Eo,(0,v.v_)(e.dateOpened),1))]),(0,b.Lk)("td",Do,[n.editMode?((0,b.uX)(),(0,b.CE)("div",Ao,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.mainProblem=t,class:"form-control custom-textarea"},null,8,To),[[o.Jo,e.mainProblem]])])):((0,b.uX)(),(0,b.CE)("div",Uo,(0,v.v_)(e.mainProblem),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",qo,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.notes=t,class:"form-control custom-textarea"},null,8,$o),[[o.Jo,e.notes]])])):((0,b.uX)(),(0,b.CE)("div",xo,(0,v.v_)(e.notes),1))])])))),128))])])])):(0,b.Q3)("",!0),e.currentPage.records&&e.currentPage.records.problems.length>0?((0,b.uX)(),(0,b.CE)("div",Mo,[Oo,(0,b.Lk)("table",Ro,[Xo,(0,b.Lk)("tbody",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.currentPage.records.problems,(e=>((0,b.uX)(),(0,b.CE)("tr",{key:e.prbNumber,required:""},[(0,b.Lk)("td",null,(0,v.v_)(e.prbNumber),1),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",_o,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t=>e.status=t,required:""},Qo,8,Jo),[[o.u1,e.status]])])):((0,b.uX)(),(0,b.CE)("div",Vo,(0,v.v_)(e.status),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",zo,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t=>e.priority=t,required:""},ts,8,Wo),[[o.u1,e.priority]])])):((0,b.uX)(),(0,b.CE)("div",Ko,(0,v.v_)(e.priority),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",os,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.rca=t,class:"form-control custom-textarea",required:""},null,8,ss),[[o.Jo,e.rca]])])):((0,b.uX)(),(0,b.CE)("div",as,(0,v.v_)(e.rca),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",rs,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.notes=t,class:"form-control custom-textarea"},null,8,ls),[[o.Jo,e.notes]])])):((0,b.uX)(),(0,b.CE)("div",ns,(0,v.v_)(e.notes),1))])])))),128))])])])):(0,b.Q3)("",!0),e.currentPage.records&&e.currentPage.records.changes.length>0?((0,b.uX)(),(0,b.CE)("div",is,[ds,(0,b.Lk)("table",cs,[us,(0,b.Lk)("tbody",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.currentPage.records.changes,(e=>((0,b.uX)(),(0,b.CE)("tr",{key:e.chgNumber,required:""},[(0,b.Lk)("td",null,(0,v.v_)(e.chgNumber),1),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",ps,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t=>e.status=t,required:""},bs,8,hs),[[o.u1,e.status]])])):((0,b.uX)(),(0,b.CE)("div",ms,(0,v.v_)(e.status),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",ks,[(0,b.bo)((0,b.Lk)("input",{type:"datetime-local",class:"form-control",id:"startDate","onUpdate:modelValue":t=>e.startDate=t,required:""},null,8,fs),[[o.Jo,e.startDate]])])):((0,b.uX)(),(0,b.CE)("div",vs,(0,v.v_)(e.startDate),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",ys,[(0,b.bo)((0,b.Lk)("input",{type:"datetime-local",class:"form-control",id:"endDate","onUpdate:modelValue":t=>e.endDate=t,required:""},null,8,ws),[[o.Jo,e.endDate]])])):((0,b.uX)(),(0,b.CE)("div",Ls,(0,v.v_)(e.endDate),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",Cs,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.notes=t,class:"form-control custom-textarea"},null,8,Ss),[[o.Jo,e.notes]])])):((0,b.uX)(),(0,b.CE)("div",Ps,(0,v.v_)(e.notes),1))])])))),128))])])])):(0,b.Q3)("",!0),e.currentPage.records&&e.currentPage.records.serviceRequests.length>0?((0,b.uX)(),(0,b.CE)("div",Es,[Is,(0,b.Lk)("table",Ns,[Ds,(0,b.Lk)("tbody",null,[((0,b.uX)(!0),(0,b.CE)(b.FK,null,(0,b.pI)(e.currentPage.records.serviceRequests,(e=>((0,b.uX)(),(0,b.CE)("tr",{key:e.ritmNumber,required:""},[(0,b.Lk)("td",null,(0,v.v_)(e.ritmNumber),1),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",As,[(0,b.bo)((0,b.Lk)("select",{"onUpdate:modelValue":t=>e.status=t,required:""},qs,8,Ts),[[o.u1,e.status]])])):((0,b.uX)(),(0,b.CE)("div",Us,(0,v.v_)(e.status),1))]),(0,b.Lk)("td",$s,[n.editMode?((0,b.uX)(),(0,b.CE)("div",Os,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.short_description=t,class:"form-control custom-textarea",required:""},null,8,Rs),[[o.Jo,e.short_description]])])):((0,b.uX)(),(0,b.CE)("div",Ms,(0,v.v_)(e.short_description),1))]),(0,b.Lk)("td",null,[n.editMode?((0,b.uX)(),(0,b.CE)("div",Vs,[(0,b.bo)((0,b.Lk)("textarea",{type:"text","onUpdate:modelValue":t=>e.notes=t,class:"form-control custom-textarea"},null,8,_s),[[o.Jo,e.notes]])])):((0,b.uX)(),(0,b.CE)("div",Xs,(0,v.v_)(e.notes),1))])])))),128))])])])):(0,b.Q3)("",!0)])):((0,b.uX)(),(0,b.CE)("div",Js,"No data available"))])}var js={data(){return{editMode:!1,userProfile:{role:localStorage.getItem("roles")},originalPageState:null,usersOnPage:[],currentImportType:"",jsonData:null,clientName:"",newIncident:{client:"",incNumber:"",status:"Active",dateOpened:"",priority:"P4 - Low",mainProblem:"",notes:""},newProblem:{client:"",prbNumber:"",status:"Evaluate",priority:"P4 - Low",rca:"",notes:""},newChange:{client:"",chgNumber:"",status:"New",startDate:"",endDate:"",notes:""},newRequest:{client:"",ritmNumber:"",status:"Draft",short_description:"",notes:""}}},computed:{...(0,l.aH)(["currentPage","pages","shifts","currentShift","toasts","usersOnPage"]),isEngineer(){return"Engineer"===this.userProfile.role},maxDate(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return`${t}-${a}-${o}T${s}:${n}`}},methods:{...(0,l.i0)(["fetchPageDetails","debouncedUpdatePageDetails","deletePage","addToast","fetchPages","setPages","setCurrentPage","fetchShifts","fetchShiftDetails"]),toggleEditMode(){this.editMode?this.hasChanges()&&this.debouncedUpdatePageDetails({page:this.currentPage,source:this.$socket.id}):this.originalPageState=JSON.stringify(this.currentPage),this.editMode=!this.editMode},hasChanges(){return JSON.stringify(this.currentPage)!==this.originalPageState},async updateEngineersOnShift(){if(this.selectedShiftId){const e=this.shifts.find((e=>e.id===this.selectedShiftId));e&&(this.currentPage.engineersOnShift=e.engineers)}},handleFileUpload(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{this.jsonData=JSON.parse(e.target.result)}catch(t){console.error("Invalid JSON format:",t),this.addToast({message:"Invalid JSON file format",type:"danger"})}},e.readAsText(t)}},async saveIncident(){this.currentPage.records||(this.currentPage.records={}),this.currentPage.records.incidents||(this.currentPage.records.incidents=[]);const e={client:this.newIncident.client,incNumber:this.newIncident.incNumber,status:this.newIncident.status,dateOpened:this.newIncident.dateOpened,priority:this.newIncident.priority,mainProblem:this.newIncident.mainProblem,notes:this.newIncident.notes};this.currentPage.records.incidents.push(e);try{await this.debouncedUpdatePageDetails({page:this.currentPage,source:this.$socket.id}),this.resetNewIncident(),this.$router.push({name:"HomePage"})}catch(t){console.error("Error saving incident:",t),this.addToast({message:"Error saving incident:",type:"danger"})}},resetNewIncident(){this.newIncident={client:"",incNumber:"",status:"Active",dateOpened:"",priority:"P4 - Low",mainProblem:"",notes:""}},async importIncidentRecords(){if(this.jsonData)if(this.clientName)try{console.log("Importing incidents:",this.jsonData),this.jsonData.records.forEach((e=>{const t={client:this.clientName,incNumber:e.number||"INC000000",status:"Active",dateOpened:(new Date).toISOString(),priority:"P4 - Low",mainProblem:e.short_description||"No description",notes:"Test note"};this.currentPage.records.incidents.push(t)})),await this.debouncedUpdatePageDetails({page:this.currentPage,source:this.$socket.id}),this.addToast({message:"Incidents imported successfully",type:"success"}),this.jsonData=null,this.clientName="",this.currentImportType=""}catch(e){console.error("Error importing incidents:",e),this.addToast({message:"Error importing incidents",type:"danger"})}else this.addToast({message:"Client name is required",type:"danger"});else this.addToast({message:"No file uploaded",type:"danger"})},async saveProblem(){const e={client:this.newProblem.client,prbNumber:this.newProblem.prbNumber,status:this.newProblem.status,priority:this.newProblem.priority,rca:this.newProblem.rca,notes:this.newProblem.notes};this.currentPage.records.problems.push(e);try{await this.debouncedUpdatePageDetails({page:this.currentPage,source:this.$socket.id}),this.resetNewProblem(),this.$router.push({name:"HomePage"})}catch(t){console.error("Error saving problem:",t),this.addToast({message:"Error saving problem:",type:"danger"})}},resetNewProblem(){this.newProblem={client:"",prbNumber:"",status:"Active",priority:"P4 - Low",rca:"",notes:""}},async saveChange(){const e={client:this.newChange.client,chgNumber:this.newChange.chgNumber,status:this.newChange.status,startDate:this.newChange.startDate,endDate:this.newChange.endDate,notes:this.newChange.notes};this.currentPage.records.changes.push(e);try{await this.debouncedUpdatePageDetails({page:this.currentPage,source:this.$socket.id}),this.resetNewChange()}catch(t){console.error("Error saving change:",t),this.addToast({message:"Error saving change:",type:"danger"})}},resetNewChange(){this.newChange={client:"",chgNumber:"",status:"Active",startDate:"",endDate:"",notes:""}},async saveRequest(){const e={client:this.newRequest.client,ritmNumber:this.newRequest.ritmNumber,status:this.newRequest.status,short_description:this.newRequest.short_description,notes:this.newRequest.notes};this.currentPage.records.serviceRequests.push(e);try{await this.debouncedUpdatePageDetails({page:this.currentPage,source:this.$socket.id}),this.resetNewRequest()}catch(t){console.error("Error saving service request:",t),this.addToast({message:"Error saving service request:",type:"danger"})}},resetNewRequest(){this.newRequest={client:"",ritmNumber:"",status:"Draft",short_description:"",notes:""}},async removePage(){const e=this.currentPage.id,t=this.currentPage.title;if(console.log("Removing page:",e),!e)return console.error("Page ID is undefined."),void this.addToast({message:"Failed to delete page: Page ID is undefined.",type:"danger"});const a=this.usersOnPage.filter((e=>e.socketId!==this.$socket.id));if(console.log("Other users on page:",this.usersOnPage),confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`)){if(a.length>0){const e=a.map((e=>e.username||"another user")).join(", "),t=`Other users (${e}) are also viewing this page. Are you sure you want to delete it?`;if(!confirm(t))return}try{const a=await fetch(`/api/records/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to delete page");this.$socket.emit("deletePage",{id:e,title:t,pageId:e}),this.$router.push({name:"HomePage"})}catch(o){this.addToast({message:`Failed to delete page: ${o.message}`,type:"danger"})}}},handlePageUpdated(e){console.log("Page updated event received:",e),this.currentPage&&this.currentPage.id===e.id&&(console.log("Updating current page:",e),this.setCurrentPage(e))}},created(){const e=this.$route.params.id;this.fetchShifts();const t=localStorage.getItem("userName");console.log("DOC ID",e),e?(this.fetchPageDetails(e),this.$socket.emit("viewPage",{pageId:e,userName:t})):console.error("Page ID is undefined."),this.$socket.on("usersOnPage",(e=>{console.log("Users on page:",e),this.$store.commit("setUsersOnPage",e)})),this.$socket.on("connect",(()=>{this.socketId=this.$socket.id}))},beforeUnmount(){this.$socket.off("usersOnPage"),this.$socket.off("pageDeleted"),this.$socket.emit("leavePage",{pageId:this.currentPage.id})}};const Hs=(0,E.A)(js,[["render",Fs],["__scopeId","data-v-189b7d6e"]]);var Bs=Hs,Qs={components:{NavBarComponent:ve,SideBarComponent:Ue,shiftComp:Bs}};const Ks=(0,E.A)(Qs,[["render",X]]);var zs=Ks;const Ws=(0,D.aE)({history:(0,D.LA)("/"),routes:[{path:"/login",name:"Login",component:q},{path:"/",name:"Home",component:zs,meta:{requiresAuth:!0}}]});Ws.beforeEach(((e,t,a)=>{const o="true"===localStorage.getItem("userAuthenticated");e.matched.some((e=>e.meta.requiresAuth))&&!o?a("/login"):"/login"===e.path&&o?a("/"):a()}));var Ys=Ws;const Gs=(0,o.Ef)(N);Gs.config.globalProperties.$socket=u,Gs.use(Ys),Gs.use(r()),Gs.use(g),u.on("connect",(()=>{console.log("Connected to Socket.IO server")})),u.on("disconnect",(()=>{console.log("Disconnected from Socket.IO server")})),s.A.get("/auth/status").then((e=>{console.log("Authentication status:",e.data.authenticated),console.log("User:",e.data.user.name),e.data.authenticated?(localStorage.setItem("userAuthenticated","true"),localStorage.setItem("user",e.data.user.name),localStorage.setItem("roles",e.data.user.roles),Gs.mount("#app")):(localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),console.log(localStorage.getItem("user")),Ys.push("/login"),Gs.mount("#app"))})).catch((e=>{console.error("Error checking authentication status:",e),localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),Ys.push("/login"),Gs.mount("#app")}))}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,n){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],n=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[i])}))?o.splice(i--,1):(l=!1,n<r&&(r=n));if(l){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,n,r=o[0],l=o[1],i=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(i)var c=i(a)}for(t&&t(o);d<r.length;d++)n=r[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(4337)}));o=a.O(o)})();
//# sourceMappingURL=app.52443a7a.js.map