(function(){"use strict";var e={2047:function(e,t,a){a(4114);var n=a(3751),r=a(1250),o=a(414),i=a.n(o),s=a(6278),l=(0,s.y$)({state:{pages:[],currentPage:null},mutations:{setPages(e,t){e.pages=t},setCurrentPage(e,t){e.currentPage=t}},actions:{async fetchPages({commit:e}){const t=await fetch("/api/records"),a=await t.json();e("setPages",a)},async fetchPageDetails({commit:e},t){const a=await fetch(`/api/records/${t}`),n=await a.json();e("setCurrentPage",n)}}}),c=a(641);function u(e,t,a,n,r,o){const i=(0,c.g2)("router-view");return(0,c.uX)(),(0,c.Wv)(i)}var d={name:"App",data(){return{isAuthenticated:!1}},created(){this.checkAuthentication()},methods:{checkAuthentication(){this.isAuthenticated=!!localStorage.getItem("userAuthenticated"),this.isAuthenticated||this.$router.push("/login")}}},v=a(6262);const p=(0,v.A)(d,[["render",u]]);var g=p,h=a(5220);const f={class:"login-container"};function m(e,t,a,n,r,o){return(0,c.uX)(),(0,c.CE)("div",f,[(0,c.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.login&&o.login(...e))},"Log in with Azure AD")])}var b={methods:{login(){window.location.href="/auth/signin"}}};const k=(0,v.A)(b,[["render",m],["__scopeId","data-v-9377a308"]]);var L=k;const C={id:"home-container"},y={class:"main-container"},w={class:"sidebar"},P={class:"content"};function S(e,t,a,n,r,o){const i=(0,c.g2)("NavBarComponent"),s=(0,c.g2)("SideBarComponent"),l=(0,c.g2)("shiftComp");return(0,c.uX)(),(0,c.CE)("div",C,[(0,c.bF)(i),(0,c.Lk)("div",y,[(0,c.Lk)("aside",w,[(0,c.bF)(s)]),(0,c.Lk)("div",P,[(0,c.bF)(l)])])])}var A=a(33);const E=e=>((0,c.Qi)("data-v-42799688"),e=e(),(0,c.jt)(),e),_={class:"navbar navbar-expand-lg bg-light"},I={class:"container-fluid"},X=E((()=>(0,c.Lk)("a",{class:"navbar-brand",href:"/"},"Handover pages",-1))),x=E((()=>(0,c.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,c.Lk)("span",{class:"navbar-toggler-icon"})],-1))),O={class:"collapse navbar-collapse",id:"navbarSupportedContent"},j=(0,c.Fv)('<ul class="navbar-nav me-auto mb-2 mb-lg-0" data-v-42799688><li class="nav-item" data-v-42799688><a class="nav-link active" aria-current="page" href="#" data-v-42799688>Templates</a></li><li class="nav-item" data-v-42799688><a class="nav-link" href="#" data-v-42799688>Shifts</a></li></ul>',1),F=E((()=>(0,c.Lk)("form",{class:"d-flex",role:"search"},[(0,c.Lk)("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1))),D={class:"navbar-nav"},N={class:"nav-item dropdown"},Q={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},T=E((()=>(0,c.Lk)("ul",{class:"dropdown-menu dropdown-menu-end","aria-labelledby":"navbarDropdownMenuLink"},[(0,c.Lk)("li",null,[(0,c.Lk)("a",{class:"dropdown-item",href:"/auth/signout"},"Sign out")])],-1)));function B(e,t,a,n,r,o){return(0,c.uX)(),(0,c.CE)("nav",_,[(0,c.Lk)("div",I,[X,x,(0,c.Lk)("div",O,[j,F,(0,c.Lk)("ul",D,[(0,c.Lk)("li",N,[(0,c.Lk)("a",Q,(0,A.v_)(r.userProfile.displayName),1),T])])])])])}var K={name:"NavBarComponent",data(){return{userProfile:{displayName:localStorage.getItem("user")}}}};const M=(0,v.A)(K,[["render",B],["__scopeId","data-v-42799688"]]);var H=M;const $={class:"sidebar-comp"},q={class:"d-flex flex-column flex-shrink-0 p-3 bg-light",style:{width:"280px"}},U={class:"pb-3 mb-3 border-bottom"},W={class:"nav-pills-wrapper"},z={class:"nav nav-pills flex-column mb-auto"},J={class:"nav-item"},V={class:"nav-item"},G=["onClick"];function R(e,t,a,r,o,i){return(0,c.uX)(),(0,c.CE)("div",$,[(0,c.Lk)("div",q,[(0,c.Lk)("div",U,[(0,c.bo)((0,c.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),type:"text",class:"form-control",placeholder:"Enter page title"},null,512),[[n.Jo,o.searchQuery]])]),(0,c.Lk)("div",W,[(0,c.Lk)("ul",z,[(0,c.Lk)("li",J,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(i.filteredPages,(e=>((0,c.uX)(),(0,c.CE)("ul",{class:"nav flex-column",key:e.id},[(0,c.Lk)("li",V,[(0,c.Lk)("a",{href:"#",class:"nav-link link-dark",onClick:t=>i.loadPage(e.id)},(0,A.v_)(e.title),9,G)])])))),128))])])])])])}var Y={name:"SidebarComponent",data(){return{searchQuery:""}},computed:{...(0,s.aH)(["pages"]),filteredPages(){return this.pages.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,s.i0)(["fetchPages","fetchPageDetails"]),loadPage(e){this.fetchPageDetails(e)}},created(){this.fetchPages()}};const Z=(0,v.A)(Y,[["render",R],["__scopeId","data-v-3dc8ffcb"]]);var ee=Z;const te=e=>((0,c.Qi)("data-v-68289e39"),e=e(),(0,c.jt)(),e),ae={id:"content-container",class:"container mt-4"},ne={key:0,class:"main-container"},re={class:"mb-3"},oe=te((()=>(0,c.Lk)("h6",null,"Engineers on Shift",-1))),ie={key:1};function se(e,t,a,n,r,o){const i=(0,c.g2)("h7");return(0,c.uX)(),(0,c.CE)("div",ae,[e.currentPage?((0,c.uX)(),(0,c.CE)("div",ne,[(0,c.Lk)("h5",re,(0,A.v_)(e.currentPage.title),1),(0,c.Lk)("div",null,[oe,(0,c.Lk)("ul",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.currentPage.engineersOnShift,(e=>((0,c.uX)(),(0,c.CE)("li",{key:e.id},(0,A.v_)(e.name),1)))),128))])]),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.currentPage.clients,((e,t)=>((0,c.uX)(),(0,c.CE)("div",{key:t},[(0,c.Lk)("h6",null,(0,A.v_)(t),1),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e,((e,t)=>((0,c.uX)(),(0,c.CE)("div",{key:t},[(0,c.bF)(i,null,{default:(0,c.k6)((()=>[(0,c.eW)((0,A.v_)(t),1)])),_:2},1024),(0,c.Lk)("ul",null,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e,(e=>((0,c.uX)(),(0,c.CE)("li",{key:e.id},(0,A.v_)(e.title)+" - "+(0,A.v_)(e.status),1)))),128))])])))),128))])))),128))])):((0,c.uX)(),(0,c.CE)("div",ie,"No data available"))])}var le={computed:{...(0,s.aH)(["currentPage"])}};const ce=(0,v.A)(le,[["render",se],["__scopeId","data-v-68289e39"]]);var ue=ce,de={components:{NavBarComponent:H,SideBarComponent:ee,shiftComp:ue}};const ve=(0,v.A)(de,[["render",S]]);var pe=ve;const ge=(0,h.aE)({history:(0,h.LA)("/"),routes:[{path:"/login",name:"Login",component:L},{path:"/",name:"Home",component:pe,meta:{requiresAuth:!0}}]});ge.beforeEach(((e,t,a)=>{const n="true"===localStorage.getItem("userAuthenticated");e.matched.some((e=>e.meta.requiresAuth))&&!n?a("/login"):"/login"===e.path&&n?a("/"):a()}));var he=ge;const fe=(0,n.Ef)(g);fe.use(he),fe.use(i()),fe.use(l),r.A.get("/auth/status").then((e=>{console.log("Authentication status:",e.data.authenticated),console.log("User:",e.data.user.name),e.data.authenticated?(localStorage.setItem("userAuthenticated","true"),localStorage.setItem("user",e.data.user.name),fe.mount("#app")):(localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),console.log(localStorage.getItem("user")),he.push("/login"),fe.mount("#app"))})).catch((e=>{console.error("Error checking authentication status:",e),localStorage.removeItem("userAuthenticated"),localStorage.removeItem("user"),he.push("/login"),fe.mount("#app")}))}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],s=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var u=l(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(2047)}));n=a.O(n)})();
//# sourceMappingURL=app.b1af20a1.js.map